{"version":3,"sources":["webpack:///./js/angular/contacts/controllers|sync|/.js$","webpack:///./js/angular/contacts/directives|sync|/.js$","webpack:///./js/angular/contacts/services|sync|/.js$","webpack:///./js/angular/contacts|sync|/.html$","webpack:///../Roblox.App.Configuration/Roblox_modules/roblox-es6-migration-helper/index.js","webpack:///./js/angular/contacts/contactsModule.js","webpack:///./js/angular/contacts/controllers/aliasController.js","webpack:///./js/angular/contacts/directives/aliasDirective.js","webpack:///./js/angular/contacts/services/contactsService.js","webpack:///./js/angular/contacts/directives/templates/alias.html","webpack:///external \"angular\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./js/angular/contacts/contactsEntry.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","camelToKebab","str","replace","toLowerCase","extractHtmlFileName","split","pop","ES6MigrationHelper","importFilesUnderPath","ctx","forEach","templateCacheGenerator","angular","moduleName","mainTplCtx","commonTplCtx","run","tc","key","name","put","contacts","aliasController","contactsModule","alias","resources","restrict","scope","templateUrl","templates","aliasTemplate","contactsService","apiParamsInitialization","httpService","localStorageService","options","default","skipCache","noCache","contactsMetadata","getContactsMetaData","httpGet","apiSets","getContactsMetadata","then","data","getUserContacts","userIds","friendsDict","opt","contactsCacheKey","contactsMultiGetLimit","multiGetContactsMaxSize","contactsCacheTTL","multiGetContactsCacheTTLinMS","contactsUrlConfig","multiGetContacts","aliases","fetchNonExpiredCachedData","Promise","resp","buildBatchPromises","length","saveDataByTimeStamp","contact","userId","targetUserId","targetUserTag","__webpack_module_cache__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","require","contactsTemplateContext"],"mappings":"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","file":"contacts.bundle.min.js","sourcesContent":["var map = {\n\t\"./aliasController.js\": 6350\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1535;","var map = {\n\t\"./aliasDirective.js\": 5471\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 6342;","var map = {\n\t\"./contactsService.js\": 8714\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2737;","var map = {\n\t\"./directives/templates/alias.html\": 9933\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 7982;","\r\nfunction camelToKebab(str) {\r\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\r\n}\r\n\r\nfunction extractHtmlFileName(str) {\r\n    let file = str.split('/').pop();\r\n    return file.replace('.html', '');\r\n}\r\n\r\n//we don't touch common template code is it might break other consumers\r\n//so we just remove the surrounding script tags.\r\nfunction removeScriptTag(str) {\r\n    var scriptTagReg = /<\\/?script[^>]*>/gi;\r\n    return str.replace(scriptTagReg, '');\r\n}\r\n\r\nconst ES6MigrationHelper = {\r\n\r\n    importFilesUnderPath: (ctx) => {\r\n        ctx.keys().forEach(ctx);\r\n    },\r\n\r\n    templateCacheGenerator: (angular, moduleName, mainTplCtx, commonTplCtx) => {\r\n        return angular.module(moduleName, [])\r\n            .run(['$templateCache', function (tc) {\r\n                if (mainTplCtx) {\r\n                    mainTplCtx.keys().forEach(key => {\r\n                        let name = camelToKebab(extractHtmlFileName(key));\r\n                        tc.put(name, mainTplCtx(key));\r\n                    });\r\n                }\r\n                if (commonTplCtx) {\r\n                    commonTplCtx.keys().forEach(key => {\r\n                        let name = camelToKebab(extractHtmlFileName(key));\r\n                        tc.put(name, removeScriptTag(commonTplCtx(key)));\r\n                    });\r\n                }\r\n            }]);\r\n    }\r\n};\r\n\r\nmodule.exports = ES6MigrationHelper;","import angular from 'angular';\r\n\r\nlet contacts = angular\r\n    .module('contacts', ['contactsAppTemplates']);\r\n\r\nexport default contacts; ","import contactsModule from '../contactsModule';\r\n\r\nfunction aliasController() {\r\n    \"ngInject\";\r\n};\r\n\r\ncontactsModule.controller('aliasController', aliasController);\r\n\r\nexport default aliasController; ","import contactsModule from '../contactsModule';\r\n\r\nfunction alias(resources) {\r\n    \"ngInject\";\r\n    return {\r\n        restrict: 'A',\r\n        scope: {\r\n            alias: '<'\r\n        },\r\n        templateUrl: resources.templates.aliasTemplate\r\n    }\r\n};\r\n\r\ncontactsModule.directive('alias', alias);\r\n\r\nexport default alias; ","import angular from 'angular';\r\nimport contactsModule from '../contactsModule';\r\n\r\nfunction contactsService(apiParamsInitialization, httpService, localStorageService) {\r\n  'ngInject';\r\n\r\n  const options = {\r\n    default: 'default', // return data if present in the cache, otherwise fetch data and rehydrate cache\r\n    skipCache: 'skipCache', // request fresh data and rehydrate the cache\r\n    noCache: 'noCache' // request fresh data and don't rehydrate the cache\r\n  };\r\n\r\n  let contactsMetadata = {};\r\n\r\n  function fetchUserContacts(userIds, opt) {\r\n    const contactsCacheKey = 'aliases';\r\n    const contactsMultiGetLimit = contactsMetadata.multiGetContactsMaxSize;\r\n    const contactsCacheTTL = contactsMetadata.multiGetContactsCacheTTLinMS;\r\n    const contactsUrlConfig = apiParamsInitialization.apiSets.multiGetContacts;\r\n\r\n    const aliases = localStorageService.fetchNonExpiredCachedData(\r\n      contactsCacheKey,\r\n      contactsCacheTTL\r\n    );\r\n    if (aliases && aliases.data && opt === options.default) {\r\n      return Promise.resolve(aliases.data);\r\n    }\r\n    const resp = httpService.buildBatchPromises(\r\n      contactsUrlConfig,\r\n      userIds,\r\n      contactsMultiGetLimit,\r\n      'targetUserIds',\r\n      'POST'\r\n    );\r\n    if (opt !== options.noCache) {\r\n      resp.then(data => {\r\n        if (data && data.length > 0) {\r\n          localStorageService.saveDataByTimeStamp(contactsCacheKey, data);\r\n        }\r\n      });\r\n    }\r\n    return resp;\r\n  }\r\n\r\n  return {\r\n    getContactsMetaData() {\r\n      const params = {};\r\n      return httpService\r\n        .httpGet(apiParamsInitialization.apiSets.getContactsMetadata, params)\r\n        .then(data => (contactsMetadata = data));\r\n    },\r\n\r\n    getUserContacts(userIds, friendsDict, opt = options.default) {\r\n      return fetchUserContacts(userIds, opt).then(function (data) {\r\n        if (data && data.length > 0) {\r\n          let contacts = [];\r\n          contacts = [...contacts, ...data[0]];\r\n          contacts.forEach(function (contact) {\r\n            const userId = contact.targetUserId;\r\n            if (!friendsDict[userId]) {\r\n              friendsDict[userId] = {};\r\n            }\r\n            friendsDict[userId].contact = contact.targetUserTag;\r\n          });\r\n        }\r\n      });\r\n    },\r\n    options\r\n  };\r\n}\r\n\r\ncontactsModule.factory('contactsService', contactsService);\r\n\r\nexport default contactsService;\r\n","module.exports = \"{{ alias ? '(' +  alias + ')' : '' }} \";","module.exports = angular;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import angular from 'angular';\r\nimport { importFilesUnderPath, templateCacheGenerator } from 'roblox-es6-migration-helper';\r\n\r\n//import main module definition.\r\nimport contactsModule from './contactsModule';\r\n\r\nimportFilesUnderPath(require.context('./controllers/', true, /\\.js$/));\r\nimportFilesUnderPath(require.context('./directives/', true, /\\.js$/));\r\nimportFilesUnderPath(require.context('./services/', true, /\\.js$/));\r\n\r\nlet contactsTemplateContext = require.context('./', true, /\\.html$/);\r\n\r\ntemplateCacheGenerator(angular, 'contactsAppTemplates', contactsTemplateContext); "],"sourceRoot":""}