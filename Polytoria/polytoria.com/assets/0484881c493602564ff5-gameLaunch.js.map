{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///external \"jQuery\"","webpack:///external \"Roblox\"","webpack:///./js/win10/appHybridClientInterface.js","webpack:///./js/authenticationChecker.js","webpack:///./js/videoPreRollDFP.js","webpack:///./js/prerollPlayer.js","webpack:///./js/gameLauncher.js","webpack:///./js/gamePlayEvents.js","webpack:///./js/gameLaunchLogger.js","webpack:///./js/gamePlayEventsHandlers.js","webpack:///./js/protocolHandlerClientInterface.js","webpack:///./ts/react/playButton/utils/playButtonUtils.ts","webpack:///./ts/react/playButton/components/PlayButton.tsx","webpack:///external \"React\"","webpack:///external \"CoreRobloxUtilities\"","webpack:///external \"CoreUtilities\"","webpack:///./ts/react/playButton/services/playButtonService.ts","webpack:///./ts/react/playButton/constants/playButtonConstants.ts","webpack:///./ts/react/playButton/hooks/usePlayabilityStatus.ts","webpack:///external \"HeaderScripts\"","webpack:///external \"ReactStyleGuide\"","webpack:///external \"RobloxItemPurchase\"","webpack:///external \"ReactUtilities\"","webpack:///external \"RobloxThumbnails\"","webpack:///./translation.config.ts","webpack:///./ts/react/playButton/playButtonEntry.ts","webpack:///./js/gameLaunchEntry.js"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","jQuery","Roblox","startGame","gameLaunchParams","deferred","$","Hybrid","resolve","translationProvider","langMap","joinMultiplayerGame","placeLauncherParams","isPlayTogetherGame","requestType","placeId","toString","browserTrackerId","Cookies","followPlayerIntoGame","userId","joinGameInstance","instanceId","gameId","joinPrivateGame","accessCode","playTogetherGame","conversationId","soliConstants","modalClassName","loginUrl","signupUrl","eventContext","loginField","signupField","document","ready","TranslationResourceProvider","getTranslationResource","restrictGuests","params","data","Dialog","titleText","bodyContent","cssClass","acceptColor","acceptText","declineText","onDecline","FormEvents","encodeURIComponent","window","location","pathname","search","href","Endpoints","onAccept","eventField","LoadingBar","bars","init","barID","innerBarID","percentageID","percentComplete","newBar","this","push","update","i","length","dispose","splice","bar","maxWidth","width","innerBarWidth","Math","round","animate","html","VideoPreRollDFP","newValue","showVideoPreRoll","videoInitialized","videoStarted","videoCompleted","videoSkipped","videoCancelled","videoErrored","loadingBarMaxTime","loadingBarCurrentTime","loadingBarIntervalID","loadingBarID","loadingBarInnerID","loadingBarPercentageID","videoDiv","companionAdDiv","contentElement","videoLoadingTimeout","videoPlayingTimeout","videoLogNote","logsEnabled","includedPlaceIds","isSwfPreloaderEnabled","isFlashInstalled","isPrerollShownEveryXMinutesEnabled","isAgeTargetingEnabled","isAgeOrSegmentTargetingEnabled","adUnit","adTime","customTargeting","userAge","userAgeOrSegment","userGender","gameGenres","environment","PLVU","adsManager","adsLoader","adDisplayContainer","intervalTimer","videoContent","isCompanionAdRenderedByGoogleTag","contentEndedListener","contentComplete","createVideoContent","getElementById","createAdDisplayContainer","google","ima","AdDisplayContainer","constructUrl","iu","ageTag","customTag","renderCompanionAd","googletag","defineSlot","addService","companionAds","enableServices","display","onAdEvent","adEvent","type","AdEvent","Type","LOADED","STARTED","isCompanionAdRenderedBywindow","cmd","getAd","getCompanionAds","content","getContent","innerHTML","SKIPPED","COMPLETE","onAdError","onAdsManagerLoaded","adsManagerLoadedEvent","getAdsManager","addEventListener","AdErrorEvent","AD_ERROR","ALL_ADS_COMPLETED","ViewMode","NORMAL","start","adError","requestAds","settings","setVpaidAllowed","initialize","AdsLoader","AdsManagerLoadedEvent","ADS_MANAGER_LOADED","adsRequest","AdsRequest","tagUrl","adTagUrl","linearAdSlotWidth","linearAdSlotHeight","nonLinearAdSlotWidth","nonLinearAdSlotHeight","checkFlashEnabled","hasFlash","ActiveXObject","e","navigator","mimeTypes","undefined","enabledPlugin","logVideoPreRoll","category","RobloxLaunch","state","GaEventSettings","GoogleAnalyticsEvents","FireEvent","isPlaying","renderImaPreloader","adUrl","url","method","crossDomain","xhrFields","withCredentials","success","updatePrerollCount","assign","checkEligibility","Client","chrome","safari","hash","correctIEModalPosition","dialog","innerContainer","shiftDistance","container","innerHeight","floor","css","position","top","find","play_placeId","setInterval","cancel","skip","close","MadStatus","running","stop","launcher","_cancelled","clearInterval","waitForPreroll","popupOptions","interval","videoPreRoll","escClose","opacity","overlayCss","backgroundColor","zIndex","hide","delay","show","modal","reject","_resolveInit","gameLauncher","gameLaunchInterface","gameLaunchLogger","initialized","Promise","editGameInStudio","universeId","allowUpload","AuthenticationChecker","then","PrerollPlayer","linkCode","click","el","attr","bindGameLaunch","authenticationChecker","prerollPlayer","openStudio","returnToStudio","openPluginInStudio","pluginId","isMembershipLevelOk","setGameLaunchInterface","newInterface","setGameLaunchLogger","newLogger","tryAssetInStudio","assetId","startClientAttemptedEvent","startClientFailedEvent","startClientSucceededEvent","beginInstallEvent","successfulInstallEvent","manualDownloadEvent","gamePlayEvents","lastContext","contextCategories","joinUser","getProperties","referrerId","placeLauncherInfo","lType","toLowerCase","pid","refuid","pg","path","profilePageString","profileLastIndex","lastIndexOf","indexOf","sendEvent","eventName","context","EventStream","SendGamePlayIntent","trigger","SendDevelopIntent","SendInstallBegin","SendInstallSuccess","SendClientStartAttempt","SendClientStartSuccessWeb","SendManualDownloadClick","GameLaunchLogger","logToConsoleEnabled","logToGAEnabled","logToEphemeralCountersEnabled","ephemeralCountersEvents","GameLauncher","googleAnalyticsEvents","eventStreamEvents","logToConsole","value","console","log","logToEphemeralCounters","counterName","launchMethod","osName","replace","EventTracker","fireEvent","logToGA","name","label","logGameLauncherEvent","event","JSON","stringify","idx","launchMode","GamePlayEvents","gameLauncherEvents","on","join","eventsToWatch","originator","currentElement","hasClass","originatorId","EnvironmentUrls","createdOn","Date","interactionType","currentUserId","UrlParser","tbl","parents","ProtocolHandlerClientInterface","isInstalling","statusInterval","robloxLocale","gameLocale","protocolUrlSeparator","protocolUrlIncludesLaunchTime","protocolDetectionEnabled","avatarParamEnabled","separateScriptParamsEnabled","waitTimeBeforeFailure","protocolNameForStudio","protocolNameForClient","logger","channel","studioChannel","playerChannel","launchModes","edit","plugin","play","build","app","asset","isStudioMode","showDialog","onClose","myOnClose","clearTimeout","showAreYouInstalledDialogTimeout","refactorEnabled","studioMode","setTimeout","PlaceLauncher","modalResource","allowHtmlContentInBody","showAccept","buttonText","showDecline","dismissable","xToCancel","footerText","footerContent","allowHtmlContentInFooter","protocolHandlerInstall","off","showAreYouInstalledDialog","loader","onCloseCallback","onCancel","each","addClass","removeClass","showLaunchFailureDialog","Lang","waitForStatus","status","cache","cleanUpAndLogSuccess","logParams","cleanUpAndLogFailure","setLocationHref","seleniumEvent","msLaunchUri","iframe","remove","append","Event","dispatchEvent","launchProtocolUrl","baseUrl","urlSeparator","gameLaunchUrl","protocolName","urlComponents","gameInfo","launchTime","host","otherParams","startGameFlow","gameLaunchDefaultParams","CurrentUser","doAuthTicketRequest","textStatus","xhr","authenticationTicket","getResponseHeader","continueInstallClick","protocolHandlerAlwaysAllowElem","getTime","browsertrackerid","isDuarAutoOptInEnabled","LaunchExp","getPlaceLauncherUrl","absoluteUrl","args","request","getEditScriptUrl","scriptHandlerName","upload","testMode","startDownload","src","beginProtocolHandlerInstall","isStudioInstall","text","declineColor","manualDownload","launchGame","eventProperties","deviceMeta","isIosDevice","isAndroidDevice","jsClientDeviceIdentifier","universalLink","encodedUniversalLink","open","playGameService","playButtonConstants","eventStreamProperties","launchLogin","PlayButton","iconClassName","showVerification","useState","setShowVerification","useEffect","playButtonService","showIdentityVerificationFlow","error","Loading","Button","className","onClick","preventDefault","stopPropagation","Playable","IdentityVerificationService","GuestProhibited","id","protocol","placeLauncherUrl","placelauncherurl","avatar","assetid","task","pluginid","script","attachManualDownloadToLink","authUrl","contentType","openDesktopUniversalApp","DUALaunchParams","placeLauncherPanel","toUpperCase","ProtocolHandlerLogger","React","CoreRobloxUtilities","CoreUtilities","gamesDataStore","dataStores","universeIds","getProductInfo","getPlaceDetails","getPlayabilityStatus","urlConfig","httpService","isUserOptIn","PlayabilityStatus","UnplayableOtherReason","GameUnapproved","IncorrectConfiguration","UniverseRootPlaceIsPrivate","InsufficientPermissionFriendsOnly","InsufficientPermissionGroupOnly","DeviceRestricted","UnderReview","PurchaseRequired","AccountRestricted","TemporarilyUnavailable","PlaceHasNoPublishedVersion","playButtonTranslationMap","ctx","properties","gamePlayIntentEventCtx","usePlayabilityStatus","fetchPlayabilityStatus","setPlayabilityStatus","response","playabilityStatus","HeaderScripts","ReactStyleGuide","RobloxItemPurchase","ReactUtilities","RobloxThumbnails","common","feature","ItemPurchase","createItemPurchase","itemPurchaseService","WithTranslationPurchaseButton","withTranslations","translate","refetchPlayabilityStatus","productInfo","setProductInfo","productDetails","setProductDetails","price","productId","expectedPrice","thumbnail","Thumbnail2d","ThumbnailTypes","size","DefaultThumbnailSize","targetId","parseInt","imgClassName","format","ThumbnailFormat","assetName","assetType","sellerName","builder","expectedCurrency","expectedSellerId","sellerId","onPurchaseSuccess","isPlace","WithTranslationError","PlayabilityStatuses","DefaultPlayButton","PurchaseButton","Error","GamePlayEventsHandlers","device","DeviceMeta","isUWPApp","isUniversalApp","AppHybridClientInterface"],"mappings":"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","file":"gameLaunch.bundle.min.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","var __WEBPACK_NAMESPACE_OBJECT__ = Roblox;","import { Cookies, Hybrid } from 'Roblox';\nimport $ from 'jquery';\n\nfunction startGame(gameLaunchParams) {\n  const deferred = new $.Deferred();\n  Hybrid.Game.launchGame(gameLaunchParams, () => {\n    deferred.resolve(gameLaunchParams);\n  });\n  return deferred;\n}\n\n// placeLauncherParams has placeId, genderId, isPlayTogetherGame\nfunction joinMultiplayerGame(placeLauncherParams) {\n  const isPlayTogetherGame = placeLauncherParams.isPlayTogetherGame === true;\n  return startGame({\n    requestType: Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,\n    placeId: placeLauncherParams.placeId.toString(),\n    isPlayTogetherGame,\n    browserTrackerId: Cookies.getBrowserTrackerId()\n  });\n}\n\n// placeLauncherParams has userId, genderId (though genderId might be ignored)\nfunction followPlayerIntoGame(placeLauncherParams) {\n  return startGame({\n    requestType: Hybrid.Game.LAUNCH_MODES.FOLLOW_USER,\n    userId: placeLauncherParams.userId.toString(),\n    browserTrackerId: Cookies.getBrowserTrackerId()\n  });\n}\n\n// placeLauncherParams has placeId, gameId, genderId, isPlayTogetherGame\nfunction joinGameInstance(placeLauncherParams) {\n  const isPlayTogetherGame = placeLauncherParams.isPlayTogetherGame === true;\n  return startGame({\n    requestType: Hybrid.Game.LAUNCH_MODES.GAME_INSTANCE,\n    placeId: placeLauncherParams.placeId.toString(),\n    instanceId: placeLauncherParams.gameId,\n    isPlayTogetherGame,\n    browserTrackerId: Cookies.getBrowserTrackerId()\n  });\n}\n\n// placeLauncherParams has placeId, accessCode\nfunction joinPrivateGame(placeLauncherParams) {\n  return startGame({\n    requestType: Hybrid.Game.LAUNCH_MODES.PRIVATE_SERVER,\n    placeId: placeLauncherParams.placeId.toString(),\n    accessCode: placeLauncherParams.accessCode,\n    browserTrackerId: Cookies.getBrowserTrackerId()\n  });\n}\n\n// placeLauncherParams has placeId, conversationId\nfunction playTogetherGame(placeLauncherParams) {\n  return startGame({\n    requestType: Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,\n    placeId: placeLauncherParams.placeId.toString(),\n    conversationId: placeLauncherParams.conversationId.toString(),\n    browserTrackerId: Cookies.getBrowserTrackerId()\n  });\n}\n\n// shim this under Roblox later.\nconst AppHybridClientInterface = {\n  joinMultiplayerGame,\n  followPlayerIntoGame,\n  joinGameInstance,\n  joinPrivateGame,\n  playTogetherGame\n};\n\nexport default AppHybridClientInterface;\n","import {\n  Dialog,\n  Endpoints,\n  FormEvents,\n  TranslationResourceProvider\n} from 'Roblox';\nimport $ from 'jquery';\n\nlet translationProvider;\nlet langMap;\n\nconst soliConstants = {\n  modalClassName: 'soli-modal',\n  loginUrl: '/login?returnurl=',\n  signupUrl: '/?returnurl=',\n  eventContext: 'gameDetails',\n  loginField: 'gameLaunch_login',\n  signupField: 'gameLaunch_signup'\n};\n\nfunction redirectToSignupWithEvent(eventField) {\n  const eventContext = 'gameDetails';\n  if (FormEvents) {\n    FormEvents.SendInteractionClick(eventContext, eventField);\n  }\n  const signupUrl =\n    soliConstants.signupUrl +\n    encodeURIComponent(window.location.pathname + window.location.search);\n  window.location.href = Endpoints\n    ? Endpoints.getAbsoluteUrl(signupUrl)\n    : signupUrl;\n}\n\nfunction restrictGuests(params) {\n  const deferred = new $.Deferred();\n  if ($('#PlaceLauncherStatusPanel').data('is-user-logged-in') === 'True') {\n    deferred.resolve(params);\n    return deferred;\n  }\n\n  Dialog.open({\n    titleText: langMap.get('Heading.Dialog.SignUpOrLogin'),\n    bodyContent: langMap.get('Description.Dialog.SignUpOrLogin'),\n    cssClass: soliConstants.modalClassName,\n    acceptColor: Dialog.green,\n    acceptText: langMap.get('Action.Dialog.SignUp'),\n    declineText: langMap.get('Action.Dialog.Login'),\n    onDecline: () => {\n      if (FormEvents) {\n        FormEvents.SendInteractionClick(\n          soliConstants.eventContext,\n          soliConstants.loginField\n        );\n      }\n      const loginUrl =\n        soliConstants.loginUrl +\n        encodeURIComponent(window.location.pathname + window.location.search);\n      window.location.href = Endpoints\n        ? Endpoints.getAbsoluteUrl(loginUrl)\n        : loginUrl;\n    },\n    onAccept: () => {\n      redirectToSignupWithEvent(soliConstants.signupField);\n    }\n  });\n\n  return deferred;\n}\n\n// set the translation provider\n$(document).ready(() => {\n  translationProvider = new TranslationResourceProvider();\n  langMap = translationProvider.getTranslationResource(\n    'Feature.GameLaunchGuestMode'\n  );\n});\n\nconst AuthenticationChecker = {\n  restrictGuests\n};\n\nexport default AuthenticationChecker;\n","import { Client, GaEventSettings } from 'Roblox';\nimport $ from 'jquery';\n\nconst LoadingBar = {\n  bars: [],\n  init: function loadingBarInit(\n    barID,\n    innerBarID,\n    percentageID,\n    percentComplete\n  ) {\n    let newBar = this.get(barID);\n    if (newBar == null) {\n      newBar = {};\n    }\n    newBar.barID = barID;\n    newBar.innerBarID = innerBarID;\n    newBar.percentageID = percentageID;\n    if (typeof percentComplete === 'undefined') {\n      newBar.percentComplete = 0; // value from 0 to 1\n    }\n    this.bars.push(newBar);\n    this.update(barID, newBar.percentComplete);\n  },\n  get: function loadingBarGet(barID) {\n    for (let i = 0; i < this.bars.length; i += 1) {\n      if (this.bars[i].barID === barID) {\n        return this.bars[i];\n      }\n    }\n    return null;\n  },\n  dispose: function loadingBarDispose(barID) {\n    for (let i = 0; i < this.bars.length; i += 1) {\n      if (this.bars[i].barID === barID) {\n        this.bars.splice(i, 1);\n      }\n    }\n  },\n  update: function loadingBarUpdate(barID, percentComplete) {\n    const bar = this.get(barID);\n    if (!bar) {\n      return;\n    }\n    if (percentComplete > 1) {\n      percentComplete = 1;\n    }\n    const maxWidth = $(`#${barID}`).width();\n    const innerBarWidth = Math.round(maxWidth * percentComplete);\n    // $(\"#\" + bar.innerBarID).width(innerBarWidth);\n    $(`#${bar.innerBarID}`).animate({ width: innerBarWidth }, 200, 'swing');\n    if (bar.percentageID && $(`#${bar.percentageID}`).length > 0) {\n      $(`#${bar.percentageID}`).html(`${Math.round(percentComplete * 100)}%`);\n    }\n    bar.percentComplete = percentComplete;\n  }\n};\n\nconst VideoPreRollDFP = {\n  newValue: '',\n  showVideoPreRoll: false,\n  videoInitialized: false, // this.start has run\n  videoStarted: false,\n  videoCompleted: false,\n  videoSkipped: false,\n  videoCancelled: false,\n  videoErrored: false,\n  loadingBarMaxTime: 30000,\n  loadingBarCurrentTime: 0,\n  loadingBarIntervalID: 0,\n  loadingBarID: 'videoPrerollLoadingBar',\n  loadingBarInnerID: 'videoPrerollLoadingBarCompleted',\n  loadingBarPercentageID: 'videoPrerollLoadingPercent',\n  videoDiv: 'videoPrerollMainDiv',\n  companionAdDiv: 'videoPrerollCompanionAd',\n  contentElement: 'contentElement',\n  videoLoadingTimeout: 7000,\n  videoPlayingTimeout: 23000,\n  videoLogNote: '', // if blank, assume this was successful\n  logsEnabled: false,\n  includedPlaceIds: '',\n  isSwfPreloaderEnabled: false,\n  isFlashInstalled: false,\n  isPrerollShownEveryXMinutesEnabled: false,\n  isAgeTargetingEnabled: true,\n  isAgeOrSegmentTargetingEnabled: false,\n\n  adUnit: '', //  /1015347/VideoPreroll\n  adTime: 0,\n  placeId: 0,\n\n  customTargeting: {\n    userAge: '',\n    userAgeOrSegment: '',\n    userGender: '',\n    gameGenres: '',\n    environment: '',\n    adTime: '',\n    PLVU: false\n  },\n\n  adsManager: null,\n  adsLoader: null,\n  adDisplayContainer: null,\n  intervalTimer: null,\n\n  videoContent: null,\n\n  isCompanionAdRenderedByGoogleTag: false\n};\n\nfunction contentEndedListener() {\n  VideoPreRollDFP.adsLoader.contentComplete();\n}\n\nfunction createVideoContent() {\n  VideoPreRollDFP.videoContent = document.getElementById(\n    VideoPreRollDFP.contentElement\n  );\n}\n\nfunction createAdDisplayContainer() {\n  VideoPreRollDFP.adDisplayContainer = new window.google.ima.AdDisplayContainer(\n    document.getElementById(VideoPreRollDFP.videoDiv),\n    VideoPreRollDFP.videoContent\n  );\n}\n\nfunction constructUrl() {\n  const baseUrl =\n    'http://pubads.g.doubleclick.net/gampad/ads?impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]';\n  const size = '&sz=400x300';\n  const iu = `&iu=${VideoPreRollDFP.adUnit}`;\n  const companionSize = '&ciu_szs=300x250';\n  let ageTag = '';\n  if (VideoPreRollDFP.isAgeTargetingEnabled) {\n    ageTag += `&Age=${VideoPreRollDFP.customTargeting.userAge}`;\n  }\n  if (VideoPreRollDFP.isAgeOrSegmentTargetingEnabled) {\n    ageTag += `&A=${VideoPreRollDFP.customTargeting.userAgeOrSegment}`;\n  }\n  const customTag = encodeURIComponent(\n    `Env=${VideoPreRollDFP.customTargeting.environment}&Gender=${\n      VideoPreRollDFP.customTargeting.userGender\n    }${ageTag}&Genres=${VideoPreRollDFP.customTargeting.gameGenres}&PlaceID=${\n      VideoPreRollDFP.placeId\n    }&Time=${VideoPreRollDFP.customTargeting.adTime}&PLVU=${\n      VideoPreRollDFP.customTargeting.PLVU\n    }`\n  );\n  const url = `${baseUrl}${size}${iu}${companionSize}&cust_params=${customTag}&`;\n  return url;\n}\n\nfunction renderCompanionAd() {\n  window.googletag\n    .defineSlot(\n      VideoPreRollDFP.adUnit,\n      [300, 250],\n      VideoPreRollDFP.companionAdDiv\n    )\n    .addService(window.googletag.companionAds());\n  window.googletag.enableServices();\n  window.googletag.display(VideoPreRollDFP.companionAdDiv);\n}\n\nfunction onAdEvent(adEvent) {\n  switch (adEvent.type) {\n    case window.google.ima.AdEvent.Type.LOADED:\n      // This is the first event sent for an ad\n      break;\n    case window.google.ima.AdEvent.Type.STARTED:\n      VideoPreRollDFP.videoStarted = true;\n\n      if (VideoPreRollDFP.isCompanionAdRenderedBywindow.googletag) {\n        if (!window.googletag) {\n          break;\n        }\n        window.googletag.cmd.push(renderCompanionAd);\n      } else {\n        // Get the ad from the event.\n        const ad = adEvent.getAd();\n        // Get a list of companion ads for an ad slot size and CompanionAdSelectionSettings\n        const companionAds = ad.getCompanionAds(300, 250);\n        if (companionAds.length > 0) {\n          const companionAd = companionAds[0];\n          // Get HTML content from the companion ad.\n          const content = companionAd.getContent();\n          // Write the content to the companion ad slot.\n          const div = document.getElementById(VideoPreRollDFP.companionAdDiv);\n          div.innerHTML = content;\n        }\n      }\n\n      break;\n    case window.google.ima.AdEvent.Type.SKIPPED:\n      VideoPreRollDFP.videoCompleted = true;\n      VideoPreRollDFP.videoSkipped = true;\n      VideoPreRollDFP.showVideoPreRoll = false;\n      break;\n    case window.google.ima.AdEvent.Type.COMPLETE:\n      if (VideoPreRollDFP.videoStarted) {\n        if (VideoPreRollDFP.videoCancelled === false) {\n          // video played to completion (or was skipped)\n          VideoPreRollDFP.videoCompleted = true;\n          VideoPreRollDFP.showVideoPreRoll = false;\n          if (VideoPreRollDFP.newValue !== '') {\n            $.cookie('RBXVPR', VideoPreRollDFP.newValue, 180);\n          }\n        }\n      }\n      break;\n    default:\n  }\n}\n\nfunction onAdError() {\n  // Handle the error logging.\n  VideoPreRollDFP.videoErrored = true;\n  VideoPreRollDFP.videoCompleted = true;\n  VideoPreRollDFP.videoLogNote = 'AdError';\n}\n\nfunction onAdsManagerLoaded(adsManagerLoadedEvent) {\n  VideoPreRollDFP.adsManager = adsManagerLoadedEvent.getAdsManager(\n    VideoPreRollDFP.videoContent\n  ); // See API reference for contentPlayback\n\n  VideoPreRollDFP.adsManager.addEventListener(\n    window.google.ima.AdErrorEvent.Type.AD_ERROR,\n    onAdError\n  );\n  VideoPreRollDFP.adsManager.addEventListener(\n    window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,\n    onAdEvent\n  );\n  VideoPreRollDFP.adsManager.addEventListener(\n    window.google.ima.AdEvent.Type.LOADED,\n    onAdEvent\n  );\n  VideoPreRollDFP.adsManager.addEventListener(\n    window.google.ima.AdEvent.Type.STARTED,\n    onAdEvent\n  );\n  VideoPreRollDFP.adsManager.addEventListener(\n    window.google.ima.AdEvent.Type.SKIPPED,\n    onAdEvent\n  );\n  VideoPreRollDFP.adsManager.addEventListener(\n    window.google.ima.AdEvent.Type.COMPLETE,\n    onAdEvent\n  );\n\n  try {\n    VideoPreRollDFP.adsManager.init(\n      400,\n      300,\n      window.google.ima.ViewMode.NORMAL\n    );\n    VideoPreRollDFP.adsManager.start();\n  } catch (adError) {\n    onAdError();\n  }\n}\n\nfunction requestAds() {\n  // Enable VPAID 2\n  window.google.ima.settings.setVpaidAllowed(true);\n\n  createVideoContent();\n  createAdDisplayContainer();\n\n  VideoPreRollDFP.adDisplayContainer.initialize();\n\n  VideoPreRollDFP.adsLoader = new window.google.ima.AdsLoader(\n    VideoPreRollDFP.adDisplayContainer\n  );\n  VideoPreRollDFP.adsLoader.addEventListener(\n    window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,\n    onAdsManagerLoaded,\n    false\n  );\n  VideoPreRollDFP.adsLoader.addEventListener(\n    window.google.ima.AdErrorEvent.Type.AD_ERROR,\n    onAdError,\n    false\n  );\n\n  VideoPreRollDFP.videoContent.addEventListener('ended', contentEndedListener);\n\n  // Request video ads.\n  const adsRequest = new window.google.ima.AdsRequest();\n\n  // construct tag url\n  const tagUrl = constructUrl();\n  adsRequest.adTagUrl = tagUrl;\n\n  // Specify the linear and nonlinear slot sizes. This helps the SDK to\n  // select the correct creative if multiple are returned.\n  adsRequest.linearAdSlotWidth = 400;\n  adsRequest.linearAdSlotHeight = 300;\n\n  adsRequest.nonLinearAdSlotWidth = 400;\n  adsRequest.nonLinearAdSlotHeight = 300;\n\n  VideoPreRollDFP.adsLoader.requestAds(adsRequest);\n}\n\nfunction checkFlashEnabled() {\n  let hasFlash = false;\n  try {\n    const flash = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n    if (flash) {\n      hasFlash = true;\n    }\n  } catch (e) {\n    if (\n      navigator.mimeTypes &&\n      navigator.mimeTypes['application/x-shockwave-flash'] !== undefined &&\n      navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin\n    ) {\n      hasFlash = true;\n    }\n  }\n  return hasFlash;\n}\n\nfunction checkEligibility() {\n  if (VideoPreRollDFP.showVideoPreRoll) {\n    if (checkFlashEnabled()) {\n      VideoPreRollDFP.isFlashInstalled = true;\n    }\n    if (\n      $('#PlaceLauncherStatusPanel').data(\n        'is-protocol-handler-launch-enabled'\n      ) !== 'True' &&\n      !Client.IsRobloxInstalled()\n    ) {\n      // we're not on protocol handler and Roblox is not installed\n      VideoPreRollDFP.showVideoPreRoll = false;\n    } else if (\n      typeof window.google === 'undefined' ||\n      typeof window.google.ima === 'undefined'\n    ) {\n      VideoPreRollDFP.videoLogNote = 'NoGoogle';\n      VideoPreRollDFP.showVideoPreRoll = false;\n    } else if (Client.isIDE()) {\n      // is Studio, check this before player\n      VideoPreRollDFP.videoLogNote = 'RobloxStudio';\n      VideoPreRollDFP.showVideoPreRoll = false;\n    } else if (Client.isRobloxBrowser()) {\n      // is Player\n      VideoPreRollDFP.videoLogNote = 'RobloxPlayer';\n      VideoPreRollDFP.showVideoPreRoll = false;\n    } else if (\n      (window.chrome || window.safari) &&\n      window.location.hash === '#chromeInstall'\n    ) {\n      // during chrome install\n      VideoPreRollDFP.showVideoPreRoll = false;\n    }\n  }\n}\n\n// -------------google analysis fire\nfunction logVideoPreRoll() {\n  if (!VideoPreRollDFP.logsEnabled) {\n    return; // logs disabled\n  }\n  let category = '';\n  if (VideoPreRollDFP.videoCompleted) {\n    // Also encompasses timeouts\n    category = 'Complete';\n    if (VideoPreRollDFP.videoLogNote === '') {\n      VideoPreRollDFP.videoLogNote = 'NoTimeout';\n    }\n    // log only once per page load\n    VideoPreRollDFP.logsEnabled = false;\n  } else if (VideoPreRollDFP.videoCancelled) {\n    category = 'Cancelled';\n    VideoPreRollDFP.videoLogNote = window.RobloxLaunch.state;\n  } else if (\n    VideoPreRollDFP.videoInitialized === false &&\n    VideoPreRollDFP.videoLogNote !== ''\n  ) {\n    category = 'Failed';\n    // log only once per page load\n    VideoPreRollDFP.logsEnabled = false;\n  } else {\n    return; // nothing to report\n  }\n  if (GaEventSettings.gaDFPPreRollEnabled && window.GoogleAnalyticsEvents) {\n    window.GoogleAnalyticsEvents.FireEvent([\n      'DFPPreRoll',\n      category,\n      VideoPreRollDFP.videoLogNote\n    ]);\n  }\n}\n\nfunction isPlaying() {\n  if (!VideoPreRollDFP.videoInitialized) {\n    return false;\n  }\n\n  // if video is not loaded post timeout, consider the video complete\n  if (\n    VideoPreRollDFP.videoInitialized &&\n    !VideoPreRollDFP.videoStarted &&\n    VideoPreRollDFP.loadingBarCurrentTime > VideoPreRollDFP.videoLoadingTimeout\n  ) {\n    VideoPreRollDFP.videoCompleted = true;\n    VideoPreRollDFP.videoLogNote = 'LoadingTimeout';\n  }\n  // if video is waaay too long, consider the video complete\n  if (\n    VideoPreRollDFP.videoStarted &&\n    !VideoPreRollDFP.videoCompleted &&\n    VideoPreRollDFP.loadingBarCurrentTime > VideoPreRollDFP.videoPlayingTimeout\n  ) {\n    VideoPreRollDFP.videoCompleted = true;\n    VideoPreRollDFP.videoLogNote = 'PlayingTimeout';\n  }\n\n  return !VideoPreRollDFP.videoCompleted;\n}\n\nfunction correctIEModalPosition(dialog) {\n  if (dialog.container.innerHeight() <= 30) {\n    // gives a little style buffer.  should really be around 15px;\n    // this must be IE (or equally stupid).  shift the modal up.\n    const innerContainer = $('#videoPrerollPanel');\n    const shiftDistance = -Math.floor(innerContainer.innerHeight() / 2);\n    innerContainer.css({ position: 'relative', top: `${shiftDistance}px` });\n    dialog.container\n      .find('.VprCloseButton')\n      .css({ top: `${shiftDistance - 10}px`, 'z-index': '1003' });\n  }\n}\n\nfunction renderImaPreloader() {\n  const adUrl = encodeURIComponent(constructUrl());\n  const adTagUrl = `adTagUrl=${adUrl}`;\n  $.ajax({\n    url: '/game/preloader',\n    data: { url: adTagUrl },\n    method: 'GET',\n    crossDomain: true,\n    xhrFields: {\n      withCredentials: true\n    }\n  }).success(data => {\n    $('#videoPrerollMainDiv').html(data);\n    if (!VideoPreRollDFP.videoErrored) {\n      VideoPreRollDFP.videoStarted = true;\n    }\n  });\n}\n\nfunction updatePrerollCount() {\n  $.ajax({\n    url: '/game/updateprerollcount',\n    method: 'GET',\n    crossDomain: true,\n    xhrFields: {\n      withCredentials: true\n    }\n  });\n}\n\nfunction start() {\n  if (VideoPreRollDFP.placeId === 0 && typeof play_placeId !== 'undefined') {\n    VideoPreRollDFP.placeId = play_placeId;\n  }\n  // flip state bits\n  VideoPreRollDFP.videoInitialized = true;\n  VideoPreRollDFP.videoStarted = false;\n  VideoPreRollDFP.videoCancelled = false;\n  VideoPreRollDFP.videoCompleted = false;\n  VideoPreRollDFP.videoSkipped = false;\n  VideoPreRollDFP.loadingBarCurrentTime = 0;\n  VideoPreRollDFP.videoLogNote = '';\n\n  const loadingBarInterval = 1000;\n\n  // Start loading bar\n  LoadingBar.init(\n    VideoPreRollDFP.loadingBarID,\n    VideoPreRollDFP.loadingBarInnerID,\n    VideoPreRollDFP.loadingBarPercentageID\n  );\n  VideoPreRollDFP.loadingBarIntervalID = setInterval(() => {\n    VideoPreRollDFP.loadingBarCurrentTime += loadingBarInterval;\n    LoadingBar.update(\n      VideoPreRollDFP.loadingBarID,\n      VideoPreRollDFP.loadingBarCurrentTime / VideoPreRollDFP.loadingBarMaxTime\n    );\n  }, loadingBarInterval);\n\n  // Fetch preroll ad\n  if (\n    VideoPreRollDFP.isSwfPreloaderEnabled &&\n    VideoPreRollDFP.isFlashInstalled\n  ) {\n    renderImaPreloader();\n  } else {\n    requestAds();\n  }\n}\n\nfunction cancel() {\n  VideoPreRollDFP.videoCancelled = true;\n  $.modal.close(); // calls this.close()\n}\n\nfunction skip() {\n  VideoPreRollDFP.videoCompleted = true;\n  VideoPreRollDFP.videoSkipped = true;\n  VideoPreRollDFP.showVideoPreRoll = false;\n}\n\nfunction close() {\n  if (window.MadStatus && window.MadStatus.running) {\n    window.MadStatus.stop('');\n  }\n  // todo: see where this robloxlaunch is coming from and if we can import it.\n  if (window.RobloxLaunch.launcher) {\n    window.RobloxLaunch.launcher._cancelled = true;\n  }\n  clearInterval(VideoPreRollDFP.loadingBarIntervalID);\n  LoadingBar.dispose(VideoPreRollDFP.loadingBarID);\n\n  if (isPlaying()) {\n    // closing before video ended, must be a cancel\n    VideoPreRollDFP.videoCancelled = true;\n  }\n\n  $.modal.close();\n  logVideoPreRoll();\n\n  // Update preroll count\n  if (\n    VideoPreRollDFP.isPrerollShownEveryXMinutesEnabled &&\n    VideoPreRollDFP.videoInitialized &&\n    VideoPreRollDFP.videoCompleted\n  ) {\n    updatePrerollCount();\n  }\n}\n\n// Add the functions\nObject.assign(VideoPreRollDFP, {\n  contentEndedListener,\n  createVideoContent,\n  createAdDisplayContainer,\n  constructUrl,\n  renderCompanionAd,\n  onAdEvent,\n  onAdError,\n  onAdsManagerLoaded,\n  requestAds,\n  checkFlashEnabled,\n  checkEligibility,\n  logVideoPreRoll,\n  isPlaying,\n  correctIEModalPosition,\n  renderImaPreloader,\n  updatePrerollCount,\n  start,\n  cancel,\n  skip,\n  close\n});\n\nexport default VideoPreRollDFP;\n","import $ from 'jquery';\nimport VideoPreRollDFP from './videoPreRollDFP';\n\nconst PrerollPlayer = {\n  waitForPreroll: params => {\n    const deferred = new $.Deferred();\n\n    const videoPreRoll = VideoPreRollDFP;\n    videoPreRoll.placeId =\n      typeof params.placeId !== 'undefined' ? params.placeId : 0;\n    if (videoPreRoll.showVideoPreRoll) {\n      const popupOptions = {\n        escClose: true,\n        opacity: 80,\n        overlayCss: { backgroundColor: '#000' },\n        zIndex: 1031 // higher than nav\n      };\n      popupOptions.onShow = dialog => {\n        videoPreRoll.correctIEModalPosition(dialog);\n        videoPreRoll.start();\n        // Enable close button after ad (:15 or :30)\n        $('#prerollClose').hide();\n        $('#prerollClose')\n          .delay(1000 * videoPreRoll.adTime)\n          .show(300);\n      };\n      popupOptions.onClose = () => {\n        videoPreRoll.close();\n      };\n      popupOptions.closeHTML =\n        '<a href=\"#\" id=\"prerollClose\" class=\"ImageButton closeBtnCircle_35h ABCloseCircle VprCloseButton\"></a>';\n\n      $('#videoPrerollPanel').modal(popupOptions);\n\n      const interval = setInterval(() => {\n        if (!videoPreRoll.isPlaying()) {\n          $.modal.close();\n          clearInterval(interval);\n          if (videoPreRoll.videoCancelled) {\n            deferred.reject(params);\n          } else {\n            deferred.resolve(params);\n          }\n        }\n      }, 200);\n    } else {\n      deferred.resolve(params);\n      videoPreRoll.logVideoPreRoll();\n    }\n\n    return deferred;\n  }\n};\n\nexport default PrerollPlayer;\n","import $ from 'jquery';\nimport AuthenticationChecker from './authenticationChecker';\nimport PrerollPlayer from './prerollPlayer';\n\n// EventNames\nconst startClientAttemptedEvent = 'startClientAttempted';\nconst startClientFailedEvent = 'startClientFailed';\nconst startClientSucceededEvent = 'startClientSucceeded';\nconst beginInstallEvent = 'beginInstall';\nconst successfulInstallEvent = 'successfulInstall';\nconst manualDownloadEvent = 'manualDownload';\n\nlet _resolveInit;\n\nconst gameLauncher = {\n  // can be overriden by win10 roblox app appHybridClientInterface.js\n  gameLaunchInterface: null,\n  gameLaunchLogger: null,\n  initialized: new Promise((resolve, reject) => {\n    _resolveInit = resolve;\n  })\n};\n\nfunction setGameLaunchInterface(newInterface) {\n  gameLauncher.gameLaunchInterface = newInterface;\n  _resolveInit();\n}\n\nfunction setGameLaunchLogger(newLogger) {\n  gameLauncher.gameLaunchLogger = newLogger;\n}\n\nfunction editGameInStudio(placeId, universeId, allowUpload) {\n  gameLauncher.gameLaunchInterface.editGameInStudio(placeId, universeId, allowUpload);\n}\n\nfunction openStudio() {\n  gameLauncher.gameLaunchInterface.openStudio();\n}\n\nfunction tryAssetInStudio(assetId) {\n  gameLauncher.gameLaunchInterface.tryAssetInStudio(assetId);\n}\n\nfunction returnToStudio() {\n  gameLauncher.gameLaunchInterface.returnToStudio();\n}\n\nfunction openPluginInStudio(pluginId) {\n  gameLauncher.gameLaunchInterface.openPluginInStudio(pluginId);\n}\n\nfunction joinMultiplayerGame(placeId, isMembershipLevelOk = true, isPlayTogetherGame) {\n  const params = { placeId, isPlayTogetherGame: isPlayTogetherGame === true };\n\n  const deferred = AuthenticationChecker.restrictGuests(params)\n    .then(PrerollPlayer.waitForPreroll)\n    .then(gameLauncher.gameLaunchInterface.joinMultiplayerGame);\n  return deferred;\n}\n\nfunction followPlayerIntoGame(userId) {\n  const params = { userId };\n  const deferred = AuthenticationChecker.restrictGuests(params)\n    .then(PrerollPlayer.waitForPreroll)\n    .then(gameLauncher.gameLaunchInterface.followPlayerIntoGame);\n  return deferred;\n}\n\nfunction joinGameInstance(placeId, gameId, isMembershipLevelOk, isPlayTogetherGame) {\n  const params = {\n    placeId,\n    gameId,\n    isPlayTogetherGame: isPlayTogetherGame === true\n  };\n  const deferred = AuthenticationChecker.restrictGuests(params)\n    .then(PrerollPlayer.waitForPreroll)\n    .then(gameLauncher.gameLaunchInterface.joinGameInstance);\n  return deferred;\n}\n\nasync function joinPrivateGame(placeId, accessCode, linkCode) {\n  await gameLauncher.initialized;\n  const params = {\n    placeId,\n    accessCode,\n    linkCode\n  };\n  const deferred = PrerollPlayer.waitForPreroll(params).then(\n    gameLauncher.gameLaunchInterface.joinPrivateGame\n  );\n  return deferred;\n}\n\nfunction playTogetherGame(placeId, conversationId) {\n  const params = { placeId, conversationId };\n\n  const deferred = AuthenticationChecker.restrictGuests(params)\n    .then(PrerollPlayer.waitForPreroll)\n    .then(gameLauncher.gameLaunchInterface.playTogetherGame);\n  return deferred;\n}\n\n// jQuery plugin for binding game launch buttons.  Finds any protocol handler game launch buttons in the current jQuery object and binds them.\n// eg: $(\"#ajaxUpdatedContainer\").bindGameLaunch();\n$.fn.bindGameLaunch = function bindGameLaunch() {\n  this.find('.VisitButtonPlayGLI').click(function() {\n    const el = $(this);\n    const placeId = el.attr('placeid');\n    const isMembershipLevelOk = el.data('is-membership-level-ok');\n    joinMultiplayerGame(placeId, isMembershipLevelOk);\n  });\n\n  this.find('.VisitButtonEditGLI').click(function() {\n    const el = $(this);\n    const placeId = el.attr('placeid');\n    const universeId = el.data('universeid');\n    const allowUpload = !!el.data('allowupload');\n    editGameInStudio(placeId, universeId, allowUpload);\n  });\n\n  return this;\n};\n\n$(document).ready(() => {\n  // ---------- VisitButtons bindings: --------------\n  $('body').bindGameLaunch();\n});\n\nObject.assign(gameLauncher, {\n  // implementations of objects, set by implementers at page load\n  authenticationChecker: AuthenticationChecker,\n  prerollPlayer: PrerollPlayer,\n\n  // Functions\n  joinMultiplayerGame,\n  openStudio,\n  returnToStudio,\n  openPluginInStudio,\n  editGameInStudio,\n  followPlayerIntoGame,\n  joinGameInstance,\n  joinPrivateGame,\n  playTogetherGame,\n  setGameLaunchInterface,\n  setGameLaunchLogger,\n  tryAssetInStudio,\n\n  // EventNames\n  startClientAttemptedEvent,\n  startClientFailedEvent,\n  startClientSucceededEvent,\n  beginInstallEvent,\n  successfulInstallEvent,\n  manualDownloadEvent\n});\n\nexport default gameLauncher;\n","import { EventStream } from 'Roblox';\nimport $ from 'jquery';\n\nconst gamePlayEvents = {\n  lastContext: 'unknown',\n  contextCategories: {\n    joinUser: 'JoinUser'\n  }\n};\n\nfunction getPage() {\n  const path = window.location.pathname.toLowerCase();\n  const profilePageString = 'profile';\n  const profileLastIndex = path.lastIndexOf(profilePageString);\n  // roundabout way of saying .endsWith since .endsWith is not supported by IE. Surprise surprise!\n  if (profileLastIndex !== -1 && path.length === profileLastIndex + profilePageString.length) {\n    return profilePageString;\n  }\n  if (path.indexOf('/develop') !== -1) {\n    return 'develop';\n  }\n\n  if (path === '/discover') {\n    return 'games';\n  }\n  return 'gameDetail';\n}\n\nfunction getProperties(placeId, referrerId) {\n  const placeLauncherInfo = $('#PlaceLauncherStatusPanel');\n  return {\n    lType:\n      placeLauncherInfo &&\n      placeLauncherInfo.data('is-protocol-handler-launch-enabled') &&\n      placeLauncherInfo.data('is-protocol-handler-launch-enabled').toLowerCase() === 'true'\n        ? 'protocol'\n        : 'plugin',\n    pid: placeId,\n    refuid: referrerId,\n    pg: getPage()\n  };\n}\n\nfunction sendEvent(eventName, context, placeId, referrerId) {\n  if (context !== null && context !== '' && context !== 'unknown') {\n    gamePlayEvents.lastContext = context;\n  }\n  EventStream.SendEvent(eventName, gamePlayEvents.lastContext, getProperties(placeId, referrerId));\n}\n\nfunction sendGamePlayIntent(context, placeId, referrerId) {\n  sendEvent('gamePlayIntent', context, placeId, referrerId);\n  $(document).trigger('playButton:gamePlayIntent');\n}\n\nfunction sendDevelopIntent(context, placeId) {\n  sendEvent('developIntent', context, placeId);\n}\n\nfunction sendInstallBegin(context, placeId) {\n  sendEvent('installBegin', context, placeId);\n}\n\nfunction sendInstallSuccess(context, placeId) {\n  sendEvent('installSuccess', context, placeId);\n}\n\nfunction sendClientStartAttempt(context, placeId) {\n  sendEvent('clientStartAttempt', context, placeId);\n}\nfunction sendClientStartSuccessWeb(context, placeId) {\n  sendEvent('clientStartSuccessWeb', context, placeId);\n}\n\nfunction sendManualDownloadClick(context, placeId) {\n  sendEvent('manualDownload', context, placeId);\n}\n\nObject.assign(gamePlayEvents, {\n  SendGamePlayIntent: sendGamePlayIntent,\n  SendDevelopIntent: sendDevelopIntent,\n  SendInstallBegin: sendInstallBegin,\n  SendInstallSuccess: sendInstallSuccess,\n  SendClientStartAttempt: sendClientStartAttempt,\n  SendClientStartSuccessWeb: sendClientStartSuccessWeb,\n  SendManualDownloadClick: sendManualDownloadClick\n});\n\nexport default gamePlayEvents;\n","/* eslint-disable prefer-const */\nimport { GaEventSettings } from 'Roblox';\nimport $ from 'jquery';\nimport GameLauncher from './gameLauncher';\nimport GamePlayEvents from './gamePlayEvents';\n\nconst GameLaunchLogger = {\n  logToConsoleEnabled: false,\n  logToGAEnabled: true,\n  logToEphemeralCountersEnabled: true\n};\n\nconst ephemeralCountersEvents = {};\nephemeralCountersEvents[GameLauncher.startClientAttemptedEvent] = [\n  'GameLaunchAttempt_<os>',\n  'GameLaunchAttempt_<os>_<launchmethod>'\n];\nephemeralCountersEvents[GameLauncher.startClientSucceededEvent] = [\n  'GameLaunchSuccessWeb_<os>',\n  'GameLaunchSuccessWeb_<os>_<launchmethod>'\n];\n\nconst googleAnalyticsEvents = {};\nif (GaEventSettings.gaLaunchAttemptAndLaunchSuccessEnabled) {\n  googleAnalyticsEvents[GameLauncher.startClientAttemptedEvent] = 'Launch Attempt';\n  googleAnalyticsEvents[GameLauncher.startClientSucceededEvent] = 'Launch Success';\n}\ngoogleAnalyticsEvents[GameLauncher.beginInstallEvent] = 'Install Begin';\ngoogleAnalyticsEvents[GameLauncher.successfulInstallEvent] = 'Install Success';\ngoogleAnalyticsEvents[GameLauncher.manualDownloadEvent] = 'Manual Download';\n\nconst eventStreamEvents = {};\neventStreamEvents[GameLauncher.startClientAttemptedEvent] = GamePlayEvents.SendClientStartAttempt;\neventStreamEvents[GameLauncher.startClientSucceededEvent] =\n  GamePlayEvents.SendClientStartSuccessWeb;\neventStreamEvents[GameLauncher.beginInstallEvent] = GamePlayEvents.SendInstallBegin;\neventStreamEvents[GameLauncher.successfulInstallEvent] = GamePlayEvents.SendInstallSuccess;\neventStreamEvents[GameLauncher.manualDownloadEvent] = GamePlayEvents.SendManualDownloadClick;\n\nfunction getLaunchMode(params) {\n  return params.params.launchMode;\n}\n\nfunction getOsName() {\n  return $('#PlaceLauncherStatusPanel').data('os-name');\n}\n\nfunction logToConsole(value) {\n  if (GameLaunchLogger.logToConsoleEnabled) {\n    console.log(value);\n  }\n}\n\nfunction logToEphemeralCounters(counterName, launchMethod) {\n  if (GameLaunchLogger.logToEphemeralCountersEnabled) {\n    let osName = getOsName();\n    if (osName === 'Windows') {\n      osName = 'Win32';\n    }\n    counterName = counterName.replace('<os>', osName);\n    counterName = counterName.replace('<launchmethod>', launchMethod);\n    if (window.EventTracker?.fireEvent) {\n      window.EventTracker.fireEvent(counterName);\n    }\n  }\n}\n\nfunction logToGA(category, name, label, value) {\n  if (\n    typeof window.GoogleAnalyticsEvents !== 'undefined' &&\n    GameLaunchLogger.logToGAEnabled &&\n    window.GoogleAnalyticsEvents.FireEvent\n  ) {\n    window.GoogleAnalyticsEvents.FireEvent([category, name, label, value]);\n  }\n}\n\nfunction logGameLauncherEvent(event, params) {\n  logToConsole(`${event.type}: ${JSON.stringify(params)}`);\n  if (ephemeralCountersEvents[event.type]) {\n    $.each(ephemeralCountersEvents[event.type], (idx, counterName) => {\n      logToEphemeralCounters(counterName, params.launchMethod);\n    });\n  }\n  if (googleAnalyticsEvents[event.type]) {\n    logToGA(params.launchMethod, googleAnalyticsEvents[event.type], getLaunchMode(params), 0);\n  }\n  if (\n    $('#PlaceLauncherStatusPanel').data('event-stream-for-protocol-enabled') === 'True' &&\n    eventStreamEvents[event.type]\n  ) {\n    // pass null into context so we use lastContext (set by gamePlayIntent event)\n    eventStreamEvents[event.type](null, params.params.placeId);\n  }\n}\n\n// public interface\nObject.assign(GameLaunchLogger, {\n  // functions\n  logToConsole,\n  logToEphemeralCounters,\n  logToGA\n});\n\n$(document).ready(() => {\n  const gameLauncherEvents = [\n    GameLauncher.startClientAttemptedEvent,\n    GameLauncher.startClientFailedEvent,\n    GameLauncher.startClientSucceededEvent,\n    GameLauncher.beginInstallEvent,\n    GameLauncher.successfulInstallEvent,\n    GameLauncher.manualDownloadEvent\n  ];\n  $(GameLauncher).on(gameLauncherEvents.join(' '), logGameLauncherEvent);\n});\n\nexport default GameLaunchLogger;\n","/* eslint-disable func-names */\nimport { EnvironmentUrls, UrlParser } from 'Roblox';\nimport $ from 'jquery';\nimport GamePlayEvents from './gamePlayEvents';\n\nfunction attachHandlers() {\n  const allRunningGameInstancesSectionPath = '#rbx-running-games';\n  const allrunningGameInstancesJoinServerPath =\n    '.rbx-game-server-item .rbx-game-server-join';\n  const runningGameInstancesForFriendsSectionPath =\n    '#rbx-friends-running-games';\n  const runningGameInstancesForFriendsJoinServerPath =\n    '.rbx-friends-game-server-item .rbx-friends-game-server-join';\n  const gameInstancesForVipServersSectionPath = '#game-instances';\n  const gameInstancesForVipJoinServerPath =\n    '#rbx-vip-servers .rbx-vip-server-item .rbx-vip-server-join';\n  const eventsToWatch = 'click';\n\n  // Generic visit buttons - game detail\n  $('body').on(\n    eventsToWatch,\n    '.VisitButtonPlay, .VisitButtonPlayGLI',\n    function() {\n      let context;\n      const currentElement = $(this);\n      if (\n        currentElement.hasClass('VisitButtonPlay') ||\n        currentElement.hasClass('VisitButtonPlayGLI')\n      ) {\n        context = 'PlayButton';\n      }\n      if (context) {\n        const placeId = $(this).attr('placeid');\n        const universeId = $(this).data('universe-id');\n        const userId = $(this).data('user-id');\n        const originator = $(this).data('originator-type');\n        const originatorId = $(this).data('originator-id');\n\n        if (originator === 'GameUpdateNotification') {\n          $.ajax({\n            url: `${\n              EnvironmentUrls.notificationApi\n            }/v2/stream-notifications/game-update-notification-interacted`,\n            type: 'POST',\n            data: {\n              universeId,\n              createdOn: new Date(originatorId),\n              interactionType: 'Played',\n              currentUserId: userId\n            }\n          });\n        }\n\n        const referrerId = UrlParser\n          ? UrlParser.getParameterValueByName('rbxp')\n          : null;\n        GamePlayEvents.SendGamePlayIntent(context, placeId, referrerId);\n      }\n    }\n  );\n\n  // Generic edit/build buttons - profile or game detail\n  $('body').on(\n    eventsToWatch,\n    '.VisitButtonEdit, .VisitButtonEditGLI',\n    function() {\n      const placeId = $(this).attr('placeid');\n      GamePlayEvents.SendDevelopIntent('Edit', placeId);\n    }\n  );\n\n  // Game detail page join instance from all running games\n  $(allRunningGameInstancesSectionPath).on(\n    eventsToWatch,\n    allrunningGameInstancesJoinServerPath,\n    function() {\n      const placeId = $(this).data('placeid');\n      if (placeId) {\n        GamePlayEvents.SendGamePlayIntent('JoinInstance', placeId);\n      }\n    }\n  );\n\n  // Game detail page join instance from running games that contain friends\n  $(runningGameInstancesForFriendsSectionPath).on(\n    eventsToWatch,\n    runningGameInstancesForFriendsJoinServerPath,\n    function() {\n      const placeId = $(this).data('placeid');\n      if (placeId) {\n        GamePlayEvents.SendGamePlayIntent('JoinInstance', placeId);\n      }\n    }\n  );\n\n  // Game detail page join VIPS\n  $(gameInstancesForVipServersSectionPath).on(\n    eventsToWatch,\n    gameInstancesForVipJoinServerPath,\n    function() {\n      const placeId = $(this).data('placeid');\n      if (placeId) {\n        GamePlayEvents.SendGamePlayIntent('PrivateServer', placeId);\n      }\n    }\n  );\n\n  // Develop page click edit\n  $('#build-page').on(eventsToWatch, '.roblox-edit-button', function() {\n    const tbl = $(this).parents('table.item-table');\n    const placeId = tbl.data('rootplace-id') || tbl.data('item-id');\n    if (placeId) {\n      GamePlayEvents.SendDevelopIntent('Edit', placeId);\n    }\n  });\n}\n\n// call this in entry file later.\nexport default attachHandlers;\n","/* eslint-disable func-names */\n/* eslint-disable prefer-const */\n// Please note: This file depends on RobloxCookies.js being already loaded.\nimport {\n  Cookies,\n  CurrentUser,\n  Dialog,\n  Endpoints,\n  EnvironmentUrls,\n  Lang,\n  PlaceLauncher\n} from 'Roblox';\nimport $ from 'jquery';\nimport GameLauncher from './gameLauncher';\n\nconst ProtocolHandlerClientInterface = {\n  isInstalling: false,\n  statusInterval: 0,\n  robloxLocale: '',\n  gameLocale: '',\n  protocolUrlSeparator: '+',\n  protocolUrlIncludesLaunchTime: false,\n  protocolDetectionEnabled: false,\n  avatarParamEnabled: true,\n  separateScriptParamsEnabled: false,\n  waitTimeBeforeFailure: 300,\n  protocolNameForStudio: 'roblox-studio',\n  protocolNameForClient: 'roblox-client',\n  logger: null,\n  channel: '',\n  studioChannel: '',\n  playerChannel: ''\n};\n\nconst launchModes = {\n  edit: 'edit',\n  plugin: 'plugin',\n  play: 'play',\n  build: 'build',\n  app: 'app',\n  asset: 'asset'\n};\n\nfunction isStudioMode(launchMode) {\n  return launchMode === launchModes.edit || launchMode === launchModes.plugin || launchMode === launchModes.asset;\n}\n\nfunction showStartingDialog(onClose, launchMode) {\n  const refactorEnabled = PlaceLauncher.Resources.RefactorEnabled === 'True';\n  const studioMode = isStudioMode(launchMode);\n\n  // use Roblox dialog modal\n  if (refactorEnabled) {\n    const bodyContent = studioMode\n      ? PlaceLauncher.Resources.ProtocolHandlerStartingDialog.studio.content\n      : PlaceLauncher.Resources.ProtocolHandlerStartingDialog.play.content;\n    const { loader } = PlaceLauncher.Resources.ProtocolHandlerStartingDialog;\n    Dialog.open({\n      bodyContent: bodyContent + loader,\n      allowHtmlContentInBody: true,\n      showAccept: false,\n      showDecline: false,\n      dismissable: false,\n      cssClass: 'protocolhandler-starting-modal',\n      onCloseCallback: onClose,\n      onCancel() {\n        onClose();\n        $.modal.close();\n      }\n    });\n    return;\n  }\n\n  if (studioMode) {\n    $('.protocol-handler-container').each(function() {\n      $(this)\n        .find('.play-modal')\n        .addClass('hidden');\n      $(this)\n        .find('.studio-modal')\n        .removeClass('hidden');\n    });\n  } else {\n    $('.protocol-handler-container').each(function() {\n      $(this)\n        .find('.play-modal')\n        .removeClass('hidden');\n      $(this)\n        .find('.studio-modal')\n        .addClass('hidden');\n    });\n  }\n\n  $('#ProtocolHandlerStartingDialog').modal({\n    escClose: true,\n    opacity: 80,\n    overlayCss: {\n      backgroundColor: '#000'\n    },\n    onClose() {\n      onClose();\n      $.modal.close();\n    },\n    zIndex: 1031\n  });\n}\n\nfunction showDialog(onClose, gameLaunchParams) {\n  let showAreYouInstalledDialogTimeout;\n  const myOnClose = () => {\n    clearTimeout(showAreYouInstalledDialogTimeout);\n    onClose();\n  };\n\n  showAreYouInstalledDialogTimeout = setTimeout(() => {\n    $.modal.close();\n    // adding eslint disable below because the function definition placements is too complicated in this big file. Will fix later\n    // eslint-disable-next-line no-use-before-define\n    showAreYouInstalledDialog(myOnClose, gameLaunchParams);\n  }, 5000);\n\n  showStartingDialog(myOnClose, gameLaunchParams.launchMode);\n}\n\nfunction showLaunchFailureDialog() {\n  $.modal.close();\n  Dialog.open({\n    titleText: Lang.VisitGameResources['Heading.ErrorStartingGame'],\n    bodyContent: Lang.VisitGameResources['Response.Dialog.ErrorLaunching'],\n    acceptText: Lang.ControlsResources['Action.OK'] || 'OK',\n    showDecline: false\n  });\n}\n\nfunction waitForStatus(gameLaunchParams) {\n  const deferred = new $.Deferred();\n  clearInterval(ProtocolHandlerClientInterface.statusInterval);\n  ProtocolHandlerClientInterface.statusInterval = setInterval(() => {\n    const url = Endpoints.getAbsoluteUrl('/client-status');\n\n    $.ajax(url, {\n      success(status) {\n        if (status !== 'Unknown') {\n          deferred.resolve(gameLaunchParams);\n          clearInterval(ProtocolHandlerClientInterface.statusInterval);\n        }\n      },\n      cache: false\n    });\n  }, 3000);\n  return deferred;\n}\n\nfunction cleanUpAndLogSuccess(gameLaunchParams) {\n  // hide dialog\n  $.modal.close();\n\n  // Log success!\n  const logParams = {\n    launchMethod: 'Protocol',\n    params: gameLaunchParams\n  };\n  $(GameLauncher).trigger(GameLauncher.startClientSucceededEvent, logParams);\n  if (ProtocolHandlerClientInterface.isInstalling) {\n    $(GameLauncher).trigger(GameLauncher.successfulInstallEvent, logParams);\n    ProtocolHandlerClientInterface.isInstalling = false;\n  }\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction cleanUpAndLogFailure(gameLaunchParams) {\n  // err.\n  // TODO: ???\n  return false;\n}\n\nfunction resetClientStatus() {\n  const url = Endpoints.getAbsoluteUrl('/client-status/set?status=Unknown');\n\n  return $.ajax({\n    method: 'POST',\n    url\n  });\n}\n\nfunction doAuthTicketRequest() {\n  let authUrl = `${EnvironmentUrls.authApi}/v1/authentication-ticket/`;\n\n  return $.ajax({\n    method: 'POST',\n    url: authUrl,\n    contentType: 'application/json'\n  });\n}\n\nfunction getAuthTicket(gameLaunchDefaultParams) {\n  let deferred = new $.Deferred();\n  let gameLaunchParams = { ...gameLaunchDefaultParams };\n\n  if (!CurrentUser.isAuthenticated) {\n    deferred.resolve(gameLaunchParams);\n    return deferred;\n  }\n\n  return ProtocolHandlerClientInterface.doAuthTicketRequest().then(function(data, textStatus, xhr) {\n    const authenticationTicket = xhr.getResponseHeader('RBX-Authentication-Ticket');\n    if (authenticationTicket && authenticationTicket.length > 0) {\n      gameLaunchParams.gameInfo = authenticationTicket;\n      deferred.resolve(gameLaunchParams);\n    } else {\n      deferred.reject();\n    }\n\n    return deferred;\n  });\n}\n\nfunction setLocationHref(href) {\n  if (\n    ProtocolHandlerClientInterface.protocolDetectionEnabled &&\n    typeof navigator.msLaunchUri !== 'undefined'\n  ) {\n    navigator.msLaunchUri(\n      href,\n      () => {},\n      () => {}\n    ); // swallow errors\n  } else {\n    let iframe = $('iframe#gamelaunch');\n    if (iframe.length > 0) {\n      iframe.remove();\n    }\n\n    iframe = $(\"<iframe id='gamelaunch' class='hidden'></iframe>\").attr('src', href);\n    $('body').append(iframe);\n    // for selenium\n    const seleniumEvent = new Event('ProtocolLaunchStartSelenium');\n    window.dispatchEvent(seleniumEvent);\n  }\n}\n\nfunction launchProtocolUrl(gameLaunchParams) {\n  const deferred = new $.Deferred();\n\n  const urlSeparator = ProtocolHandlerClientInterface.protocolUrlSeparator;\n  let gameLaunchUrl = `${gameLaunchParams.protocolName}:`;\n  const urlComponents = [];\n\n  urlComponents.push(1); // protocol version parameter - used if we wish to significantly change the structure of the protocol url\n  urlComponents.push(`launchmode:${gameLaunchParams.launchMode}`);\n\n  // Studio will freeze at log-in if passed a guest ticket\n  if (\n    gameLaunchParams.gameInfo &&\n    (gameLaunchParams.protocolName !== ProtocolHandlerClientInterface.protocolNameForStudio ||\n      gameLaunchParams.gameInfo.indexOf('Guest:') !== 0)\n  ) {\n    urlComponents.push(`gameinfo:${encodeURIComponent(gameLaunchParams.gameInfo)}`);\n  }\n\n  if (ProtocolHandlerClientInterface.protocolUrlIncludesLaunchTime) {\n    urlComponents.push(`launchtime:${gameLaunchParams.launchTime}`);\n  }\n\n  if (PlaceLauncher.Resources.IsProtocolHandlerBaseUrlParamEnabled === 'True') {\n    const baseUrl = EnvironmentUrls.websiteUrl || `https://${window.location.host}`;\n    urlComponents.push(`baseUrl:${encodeURIComponent(baseUrl)}`);\n  }\n\n  $.each(gameLaunchParams.otherParams, (name, value) => {\n    if (name === value) {\n      // assume if name === value, just add name\n      urlComponents.push(name);\n    } else {\n      urlComponents.push(`${name}:${encodeURIComponent(value)}`);\n    }\n  });\n\n  gameLaunchUrl += urlComponents.join(urlSeparator);\n  if (GameLauncher.gameLaunchLogger) {\n    GameLauncher.gameLaunchLogger.logToConsole(\n      `launchProtocolUrl: ${JSON.stringify({\n        url: gameLaunchUrl,\n        params: gameLaunchParams\n      })}`\n    );\n  }\n  // setLocationHref is used so that automated tests can intercept the protocol handler URL for verification.  Do not refactor without checking the tests.\n  setLocationHref(gameLaunchUrl);\n\n  deferred.resolve(gameLaunchParams);\n  return deferred;\n}\n\nfunction startGameFlow(gameLaunchParams) {\n  return $.when(getAuthTicket(gameLaunchParams), resetClientStatus())\n    .then(launchProtocolUrl, showLaunchFailureDialog)\n    .then(waitForStatus)\n    .then(cleanUpAndLogSuccess, cleanUpAndLogFailure);\n}\n\nfunction continueInstallClick(e) {\n  const clickedElement = $(this);\n  if (!clickedElement.hasClass('disabled')) {\n    startGameFlow(e.data);\n    const protocolHandlerAlwaysAllowElem = $('#ProtocolHandlerClickAlwaysAllowed');\n    if (typeof protocolHandlerAlwaysAllowElem.data('hideRememberOverlay') === 'undefined') {\n      // if the attribute is not set, we should show the element.\n      protocolHandlerAlwaysAllowElem.show();\n    }\n  }\n\n  return false;\n}\n\nfunction startGame(gameLaunchDefaultParams) {\n  const gameLaunchParams = { ...gameLaunchDefaultParams };\n  gameLaunchParams.launchTime = new Date().getTime();\n  gameLaunchParams.otherParams.browsertrackerid = Cookies.getBrowserTrackerId();\n\n  gameLaunchParams.otherParams.robloxLocale = ProtocolHandlerClientInterface.robloxLocale;\n  gameLaunchParams.otherParams.gameLocale = ProtocolHandlerClientInterface.gameLocale;\n  gameLaunchParams.otherParams.channel = ProtocolHandlerClientInterface.channel;\n\n  if (gameLaunchParams.protocolName === ProtocolHandlerClientInterface.protocolNameForStudio){\n    gameLaunchParams.otherParams.channel = ProtocolHandlerClientInterface.studioChannel;\n  } else {\n    gameLaunchParams.otherParams.channel = ProtocolHandlerClientInterface.playerChannel;\n  }\n\n  if (\n    ProtocolHandlerClientInterface.isDuarAutoOptInEnabled &&\n    gameLaunchParams.protocolName === ProtocolHandlerClientInterface.protocolNameForClient &&\n    !gameLaunchParams.otherParams.LaunchExp\n  ){\n    gameLaunchParams.otherParams.LaunchExp = 'PreferInApp';\n  }\n\n  // fire startClientAttempted\n  $(GameLauncher).trigger(GameLauncher.startClientAttemptedEvent, {\n    launchMethod: 'Protocol',\n    params: gameLaunchParams\n  });\n  showDialog(() => {}, gameLaunchParams);\n  // return the deferred object so we can continue chaining, if desired.\n  return startGameFlow(gameLaunchParams);\n}\n\nfunction openDesktopUniversalApp() {\n  const DUALaunchParams = {};\n  const protocol = ProtocolHandlerClientInterface.protocolNameForClient;\n  DUALaunchParams.protocolName = protocol;\n  DUALaunchParams.launchTime = new Date().getTime();\n  DUALaunchParams.launchMode = launchModes.app;\n  DUALaunchParams.otherParams = {};\n  DUALaunchParams.otherParams.browsertrackerid = Cookies.getBrowserTrackerId();\n  DUALaunchParams.otherParams.robloxLocale = ProtocolHandlerClientInterface.robloxLocale;\n  DUALaunchParams.otherParams.gameLocale = ProtocolHandlerClientInterface.gameLocale;\n  DUALaunchParams.otherParams.LaunchExp = 'InApp';\n\n  // fire startClientAttempted\n  $(GameLauncher).trigger(GameLauncher.startClientAttemptedEvent, {\n    launchMethod: 'Protocol',\n    params: DUALaunchParams\n  });\n  showDialog(() => {}, DUALaunchParams);\n  // return the deferred object so we can continue chaining, if desired.\n  return startGameFlow(DUALaunchParams);\n}\n\nfunction getPlaceLauncherUrl(requestType, otherParams) {\n  let absoluteUrl = ' ';\n  if (Endpoints && Endpoints.Urls) {\n    absoluteUrl = `${Endpoints.getAbsoluteUrl('/Game/PlaceLauncher.ashx')}?`;\n  }\n\n  // if endpoints are turned off, or if the absolute url resolver returns a relative path, fallback on the old method\n  if (absoluteUrl[0] !== 'h') {\n    const domainUrl = `http://${window.location.host}`;\n    const domainPath = '/Game/PlaceLauncher.ashx?';\n    absoluteUrl = domainUrl + domainPath;\n  }\n  absoluteUrl = absoluteUrl.replace('placelauncher', 'PlaceLauncher');\n\n  const args = {\n    request: requestType,\n    browserTrackerId: Cookies.getBrowserTrackerId()\n  };\n  $.extend(args, otherParams);\n  return absoluteUrl + $.param(args);\n}\n\nfunction getStudioScriptUrl(scriptHandlerName, placeId, universeId, allowUpload) {\n  let absoluteUrl = ' ';\n  if (Endpoints && Endpoints.Urls) {\n    absoluteUrl = `${Endpoints.getAbsoluteUrl(`/Game/${scriptHandlerName}`)}?`;\n  }\n\n  // if endpoints are turned off, or if the absolute url resolver returns a relative path, fallback on the old method\n  if (absoluteUrl[0] !== 'h') {\n    const domainUrl = `http://${window.location.host}`;\n    const domainPath = `/Game/${scriptHandlerName}?`;\n    absoluteUrl = domainUrl + domainPath;\n  }\n\n  const args = {\n    placeId,\n    upload: allowUpload ? placeId : '',\n    universeId,\n    testMode: false\n  };\n  return absoluteUrl + $.param(args);\n}\n\nfunction getEditScriptUrl(placeId, universeId, allowUpload) {\n  return getStudioScriptUrl('Edit.ashx', placeId, universeId, allowUpload);\n}\n\nfunction openStudio() {\n  const otherParams = {};\n\n  if (ProtocolHandlerClientInterface.avatarParamEnabled) {\n    otherParams.avatar = 'avatar';\n  }\n\n  return startGame({\n    protocolName: ProtocolHandlerClientInterface.protocolNameForStudio,\n    launchMode: 'edit',\n    otherParams\n  });\n}\n\nfunction tryAssetInStudio(assetId) {\n  const otherParams = {\n    assetid: assetId\n  };\n\n  if (ProtocolHandlerClientInterface.avatarParamEnabled) {\n    otherParams.avatar = 'avatar';\n  }\n\n  return startGame({\n    protocolName: ProtocolHandlerClientInterface.protocolNameForStudio,\n    launchMode: 'asset',\n    otherParams\n  });\n}\n\nfunction returnToStudio() {\n  const otherParams = {\n    task: 'ReturnFromLogin'\n  };\n\n  if (ProtocolHandlerClientInterface.avatarParamEnabled) {\n    otherParams.avatar = 'avatar';\n  }\n\n  return startGame({\n    protocolName: ProtocolHandlerClientInterface.protocolNameForStudio,\n    launchMode: 'edit',\n    otherParams\n  });\n}\n\nfunction openPluginInStudio(pluginId) {\n  const otherParams = {\n    pluginid: pluginId\n  };\n\n  if (ProtocolHandlerClientInterface.avatarParamEnabled) {\n    otherParams.avatar = 'avatar';\n  }\n\n  startGame({\n    protocolName: ProtocolHandlerClientInterface.protocolNameForStudio,\n    launchMode: 'plugin',\n    otherParams\n  });\n}\n\nfunction editGameInStudio(placeId, universeId, allowUpload) {\n  let otherParams;\n  if (ProtocolHandlerClientInterface.separateScriptParamsEnabled) {\n    otherParams = {\n      task: 'EditPlace',\n      placeId,\n      universeId\n    };\n  } else {\n    const scriptUrl = getEditScriptUrl(placeId, universeId, allowUpload);\n    otherParams = {\n      script: scriptUrl\n    };\n  }\n\n  if (ProtocolHandlerClientInterface.avatarParamEnabled) {\n    otherParams.avatar = 'avatar';\n  }\n\n  // we currently always pass \"avatar\" to studio, but in the future it may need to be optional\n  startGame({\n    protocolName: ProtocolHandlerClientInterface.protocolNameForStudio,\n    launchMode: 'edit',\n    otherParams,\n    placeId\n  });\n}\n\n// placeLauncherParams has placeId, genderId, isPlayTogetherGame\nfunction joinMultiplayerGame(placeLauncherParams) {\n  const protocol = ProtocolHandlerClientInterface.protocolNameForClient;\n\n  const launchMode = 'play';\n  const placeLauncherUrl = getPlaceLauncherUrl('RequestGame', placeLauncherParams);\n  const isPlayTogetherGame = placeLauncherParams.isPlayTogetherGame === true;\n  const otherParams = {\n    placelauncherurl: placeLauncherUrl\n  };\n  const startGameParams = {\n    protocolName: protocol,\n    launchMode,\n    otherParams,\n    placeId: placeLauncherParams.placeId,\n    isPlayTogetherGame\n  };\n\n  return startGame(startGameParams);\n}\n\n// placeLauncherParams has userId, genderId (though genderId might be ignored)\nfunction followPlayerIntoGame(placeLauncherParams) {\n  const protocol = ProtocolHandlerClientInterface.protocolNameForClient;\n\n  const launchMode = 'play';\n  const placeLauncherUrl = getPlaceLauncherUrl('RequestFollowUser', placeLauncherParams);\n  const params = {\n    placelauncherurl: placeLauncherUrl\n  };\n  const startGameParams = {\n    protocolName: protocol,\n    launchMode,\n    otherParams: params\n  };\n\n  return startGame(startGameParams);\n}\n\n// placeLauncherParams has placeId, gameId, genderId, isPlayTogetherGame\nfunction joinGameInstance(placeLauncherParams) {\n  const protocol = ProtocolHandlerClientInterface.protocolNameForClient;\n\n  const launchMode = 'play';\n  const placeLauncherUrl = getPlaceLauncherUrl('RequestGameJob', placeLauncherParams);\n  const isPlayTogetherGame = placeLauncherParams.isPlayTogetherGame === true;\n  const params = {\n    placelauncherurl: placeLauncherUrl\n  };\n  const startGameParams = {\n    protocolName: protocol,\n    launchMode,\n    otherParams: params,\n    placeId: placeLauncherParams.placeId,\n    isPlayTogetherGame\n  };\n\n  return startGame(startGameParams);\n}\n\n// placeLauncherParams has placeId, accessCode\nfunction joinPrivateGame(placeLauncherParams) {\n  const protocol = ProtocolHandlerClientInterface.protocolNameForClient;\n\n  const launchMode = 'play';\n  const placeLauncherUrl = getPlaceLauncherUrl('RequestPrivateGame', placeLauncherParams);\n  const params = {\n    placelauncherurl: placeLauncherUrl\n  };\n  const startGameParams = {\n    protocolName: protocol,\n    launchMode,\n    otherParams: params,\n    placeId: placeLauncherParams.placeId\n  };\n\n  return startGame(startGameParams);\n}\n\n// placeLauncherParams has placeId, conversationId\nfunction playTogetherGame(placeLauncherParams) {\n  const protocol = ProtocolHandlerClientInterface.protocolNameForClient;\n\n  const launchMode = 'play';\n  const placeLauncherUrl = getPlaceLauncherUrl('RequestPlayTogetherGame', placeLauncherParams);\n  const otherParams = {\n    placelauncherurl: placeLauncherUrl\n  };\n  const startGameParams = {\n    protocolName: protocol,\n    launchMode,\n    otherParams,\n    placeId: placeLauncherParams.placeId,\n    conversationId: placeLauncherParams.conversationId\n  };\n\n  return startGame(startGameParams);\n}\n\nfunction startDownload() {\n  const iframe = document.getElementById('downloadInstallerIFrame');\n  iframe.src = '/download/client';\n}\n\nfunction startStudioDownload() {\n  const iframe = document.getElementById('downloadInstallerIFrame');\n  iframe.src = '/download/studio';\n}\n\nfunction beginProtocolHandlerInstall(gameLaunchDefaultParams, isStudioInstall) {\n  // remove gameinfo, if it's there\n  let gameLaunchParams = { ...gameLaunchDefaultParams };\n  const { gameInfo } = gameLaunchParams;\n  if (typeof gameLaunchParams.gameInfo !== 'undefined') {\n    gameLaunchParams.gameInfo = undefined;\n  }\n  // fire begin install event\n  $(GameLauncher).trigger(GameLauncher.beginInstallEvent, {\n    launchMethod: 'Protocol',\n    params: gameLaunchParams\n  });\n  ProtocolHandlerClientInterface.isInstalling = true;\n  // store in cookie\n  gameLaunchParams.url = window.location.href;\n  // re-add gameInfo, for in-page installation\n  if (typeof gameInfo !== 'undefined') {\n    gameLaunchParams.gameInfo = gameInfo;\n  }\n\n  if (isStudioInstall) {\n    startStudioDownload();\n  } else {\n    startDownload();\n  }\n}\n\nfunction protocolHandlerInstall(gameLaunchParams) {\n  const { launchMode } = gameLaunchParams;\n  const studioMode = isStudioMode(launchMode);\n\n  $.modal.close();\n  if (!studioMode) {\n    Dialog.open({\n      titleText: $('#InstallationInstructions .ph-modal-header .title').text(),\n      allowHtmlContentInBody: true,\n      bodyContent: $('#InstallationInstructions .modal-content-container').html(),\n      allowHtmlContentInFooter: true,\n      footerText: $('#InstallationInstructions .xsmall').html(),\n      acceptColor: Dialog.none,\n      declineColor: Dialog.none,\n      cssClass: 'install-instructions-modal',\n      xToCancel: true,\n      onCloseCallback() {\n        $('#ProtocolHandlerClickAlwaysAllowed').hide();\n      }\n    });\n\n    setTimeout(() => {\n      $('.VisitButtonContinueGLI a')\n        .removeClass('disabled')\n        .click(gameLaunchParams, continueInstallClick);\n    }, 5000);\n  }\n\n  beginProtocolHandlerInstall(gameLaunchParams, studioMode);\n}\n\nfunction showAreYouInstalledDialog(onClose, gameLaunchParams) {\n  const refactorEnabled = PlaceLauncher.Resources.RefactorEnabled === 'True';\n  const { launchMode } = gameLaunchParams;\n  const studioMode = isStudioMode(launchMode);\n\n  if (refactorEnabled) {\n    const modalResource = studioMode\n      ? PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.studio\n      : PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.play;\n    Dialog.open({\n      bodyContent: modalResource.content,\n      allowHtmlContentInBody: true,\n      showAccept: true,\n      acceptColor: Dialog.green,\n      acceptText: modalResource.buttonText,\n      showDecline: false,\n      dismissable: false,\n      xToCancel: true,\n      footerText: modalResource.footerContent,\n      allowHtmlContentInFooter: true,\n      onAccept() {\n        protocolHandlerInstall(gameLaunchParams);\n      },\n      cssClass: 'protocolhandler-are-you-installed-modal'\n    });\n    return;\n  }\n\n  $('#ProtocolHandlerAreYouInstalled').modal({\n    escClose: true,\n    opacity: 80,\n    overlayCss: {\n      backgroundColor: '#000'\n    },\n    onClose() {\n      onClose();\n      $('#ProtocolHandlerInstallButton').off('click');\n      $.modal.close();\n    },\n    zIndex: 1031\n  });\n  $('#ProtocolHandlerInstallButton, #ProtocolHandlerStudioInstallButton').click(function() {\n    protocolHandlerInstall(gameLaunchParams);\n  });\n}\n\nfunction manualDownload() {\n  $(GameLauncher).trigger(GameLauncher.manualDownloadEvent, {\n    launchMethod: 'Protocol',\n    params: {}\n  });\n  startDownload();\n}\n\nfunction attachManualDownloadToLink() {\n  $('body #GameLaunchManualInstallLink').click(function() {\n    manualDownload();\n    return false;\n  });\n}\n\n// attach the functions\nObject.assign(ProtocolHandlerClientInterface, {\n  // functions\n  joinMultiplayerGame,\n  openStudio,\n  tryAssetInStudio,\n  returnToStudio,\n  openPluginInStudio,\n  editGameInStudio,\n  followPlayerIntoGame,\n  joinGameInstance,\n  joinPrivateGame,\n  playTogetherGame,\n  manualDownload,\n  attachManualDownloadToLink,\n  startDownload,\n  setLocationHref, // this is used by automated tests to intercept the protocol handler URL for verification.  Do not remove.\n  doAuthTicketRequest, // expose this so usable from other places.\n  openDesktopUniversalApp,\n  // test overrides\n  showDialog,\n  showLaunchFailureDialog,\n  cleanUpAndLogSuccess,\n  cleanUpAndLogFailure\n});\n\n$(document).ready(function() {\n  GameLauncher.setGameLaunchInterface(ProtocolHandlerClientInterface);\n  const placeLauncherPanel = $('#PlaceLauncherStatusPanel');\n  ProtocolHandlerClientInterface.protocolNameForClient = placeLauncherPanel.data(\n    'protocol-name-for-client'\n  );\n  ProtocolHandlerClientInterface.protocolNameForStudio = placeLauncherPanel.data(\n    'protocol-name-for-studio'\n  );\n  ProtocolHandlerClientInterface.protocolUrlIncludesLaunchTime = placeLauncherPanel.data(\n    'protocol-url-includes-launchtime'\n  );\n  ProtocolHandlerClientInterface.protocolDetectionEnabled = placeLauncherPanel.data(\n    'protocol-detection-enabled'\n  );\n  ProtocolHandlerClientInterface.separateScriptParamsEnabled = placeLauncherPanel.data(\n    'protocol-separate-script-parameters-enabled'\n  );\n  ProtocolHandlerClientInterface.avatarParamEnabled = placeLauncherPanel.data(\n    'protocol-avatar-parameter-enabled'\n  );\n  ProtocolHandlerClientInterface.robloxLocale = placeLauncherPanel.data('protocol-roblox-locale');\n  ProtocolHandlerClientInterface.gameLocale = placeLauncherPanel.data('protocol-game-locale');\n  var channel = placeLauncherPanel.data('protocol-channel-name');\n  if(typeof channel === 'string' && channel.toUpperCase() !== 'LIVE'){\n    ProtocolHandlerClientInterface.channel = channel;\n  }\n\n  var studioChannel = placeLauncherPanel.data('protocol-studio-channel-name');\n  if(typeof studioChannel === 'string' && studioChannel.toUpperCase() !== 'LIVE'){\n    ProtocolHandlerClientInterface.studioChannel = studioChannel;\n  }\n\n  var playerChannel = placeLauncherPanel.data('protocol-player-channel-name');\n  if(typeof playerChannel === 'string' && playerChannel.toUpperCase() !== 'LIVE'){\n    ProtocolHandlerClientInterface.playerChannel = playerChannel;\n  }\n\n  if (\n    !ProtocolHandlerClientInterface.logger &&\n    typeof window.Roblox.ProtocolHandlerLogger !== 'undefined'\n  ) {\n    ProtocolHandlerClientInterface.logger = window.Roblox.ProtocolHandlerLogger;\n  }\n\n  ProtocolHandlerClientInterface.isDuarAutoOptInEnabled = placeLauncherPanel.data(\n    'is-duar-auto-opt-in-enabled'\n  );\n});\n\n// todo: set Roblox.ProtocolHandlerClientInterface to be this.\nexport default ProtocolHandlerClientInterface;\n","import { EnvironmentUrls } from 'Roblox';\nimport { deviceMeta as DeviceMeta, jsClientDeviceIdentifier } from 'header-scripts';\nimport { playGameService } from 'core-roblox-utilities';\nimport playButtonConstants from '../constants/playButtonConstants';\n\nexport const launchGame = (\n  placeId: string,\n  eventProperties: Record<string, string | number | undefined> = {}\n): void => {\n  const deviceMeta = DeviceMeta.getDeviceMeta();\n  if (\n    deviceMeta?.isIosDevice ||\n    deviceMeta?.isAndroidDevice ||\n    jsClientDeviceIdentifier.isIos13Ipad\n  ) {\n    const universalLink = `${EnvironmentUrls.websiteUrl}/games/start?placeid=${placeId}`;\n    const encodedUniversalLink = encodeURIComponent(universalLink);\n    window.open(\n      `https://ro.blox.com/Ebh5?pid=share&is_retargeting=true&af_dp=${encodedUniversalLink}&af_web_dp=${encodedUniversalLink}`\n    );\n  } else {\n    playGameService.launchGame(\n      playGameService.buildPlayGameProperties(undefined, placeId.toString()),\n      playButtonConstants.eventStreamProperties(placeId, eventProperties)\n    );\n  }\n};\n\nexport const launchLogin = (placeId: string): void => {\n  const deviceMeta = DeviceMeta.getDeviceMeta();\n  if (\n    deviceMeta?.isIosDevice ||\n    deviceMeta?.isAndroidDevice ||\n    jsClientDeviceIdentifier.isIos13Ipad\n  ) {\n    const universalLink = `${EnvironmentUrls.websiteUrl}/games/start?placeid=${placeId}`;\n    const encodedUniversalLink = encodeURIComponent(universalLink);\n    window.open(\n      `https://ro.blox.com/Ebh5?pid=share&is_retargeting=true&af_dp=${encodedUniversalLink}&af_web_dp=${encodedUniversalLink}`\n    );\n  } else {\n    playGameService.launchGame(\n      playGameService.buildPlayGameProperties(undefined, placeId.toString()),\n      playButtonConstants.eventStreamProperties(placeId, {})\n    );\n  }\n};\n","import React, { useState, useEffect } from 'react';\nimport { Loading, Button } from 'react-style-guide';\nimport { createItemPurchase } from 'roblox-item-purchase';\nimport { TranslateFunction, withTranslations } from 'react-utilities';\nimport {\n  Thumbnail2d,\n  ThumbnailTypes,\n  DefaultThumbnailSize,\n  ThumbnailFormat\n} from 'roblox-thumbnails';\nimport { IdentityVerificationService } from 'Roblox';\nimport {\n  TPlayabilityStatus,\n  TPlayabilityStatuses,\n  TGetProductInfo,\n  TGetProductDetails\n} from '../types/playButtonTypes';\nimport playButtonService from '../services/playButtonService';\nimport playButtonConstants from '../constants/playButtonConstants';\nimport { launchGame, launchLogin } from '../utils/playButtonUtils';\nimport playButtonTranslationConfig from '../../../../translation.config';\n\nconst [ItemPurchase, itemPurchaseService] = createItemPurchase();\nconst { PlayabilityStatus } = playButtonConstants;\n\nexport type TPurchaseButtonProps = {\n  universeId: string;\n  placeId: string;\n  iconClassName?: string;\n  refetchPlayabilityStatus: () => void;\n};\n\nexport const PurchaseButton = ({\n  translate,\n  universeId,\n  placeId,\n  iconClassName = 'icon-robux-white',\n  refetchPlayabilityStatus\n}: TPurchaseButtonProps & {\n  translate: TranslateFunction;\n}): JSX.Element => {\n  const [productInfo, setProductInfo] = useState<TGetProductInfo | undefined>(undefined);\n  const [productDetails, setProductDetails] = useState<TGetProductDetails | undefined>(undefined);\n\n  useEffect(() => {\n    const fetchProductInfo = async () => {\n      try {\n        const response = await playButtonService.getProductInfo([universeId]);\n        setProductInfo(response);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    const fetchProductDetails = async () => {\n      try {\n        const response = await playButtonService.getProductDetails([placeId]);\n        setProductDetails(response);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    // eslint-disable-next-line no-void\n    void fetchProductInfo();\n    // eslint-disable-next-line no-void\n    void fetchProductDetails();\n  }, []);\n\n  if (productInfo === undefined || productDetails === undefined) {\n    return <Loading />;\n  }\n\n  return (\n    <React.Fragment>\n      <Button\n        data-testid='play-purchase-button'\n        className='btn-full-width btn-common-play-game-lg'\n        onClick={e => {\n          e.preventDefault();\n          e.stopPropagation();\n          itemPurchaseService.start();\n        }}>\n        <span className={iconClassName} />\n        <span className='btn-text'>{productInfo.price}</span>{' '}\n      </Button>\n      <ItemPurchase\n        {...{\n          translate,\n          productId: productInfo.productId,\n          expectedPrice: productInfo.price,\n          thumbnail: (\n            <Thumbnail2d\n              type={ThumbnailTypes.gameIcon}\n              size={DefaultThumbnailSize}\n              targetId={parseInt(universeId, 10)}\n              imgClassName='game-card-thumb'\n              format={ThumbnailFormat.jpeg}\n            />\n          ),\n          assetName: productDetails.name,\n          assetType: 'Place',\n          sellerName: productDetails.builder,\n          expectedCurrency: 1,\n          expectedSellerId: productInfo.sellerId,\n          onPurchaseSuccess: refetchPlayabilityStatus,\n          isPlace: true\n        }}\n      />\n    </React.Fragment>\n  );\n};\n\nexport const WithTranslationPurchaseButton = withTranslations<TPurchaseButtonProps>(\n  PurchaseButton,\n  playButtonTranslationConfig\n);\n\nconst getShowIdentityVerificationFlow = async (universeId: string): Promise<boolean> => {\n  const { playButtonOverlayWebFlag } = await playButtonService.getGuacPlayButtonUI();\n  if (!playButtonOverlayWebFlag) {\n    return false;\n  }\n  const { showAgeVerificationOverlay } = await playButtonService.getShowAgeVerificationOverlay(\n    universeId\n  );\n  return showAgeVerificationOverlay;\n};\n\nexport type TPlayButtonProps = {\n  universeId: string;\n  placeId: string;\n  iconClassName?: string;\n  eventProperties?: Record<string, string | number | undefined>;\n  status: TPlayabilityStatuses['Playable'] | TPlayabilityStatuses['GuestProhibited'];\n};\n\nexport const PlayButton = ({\n  universeId,\n  placeId,\n  status,\n  eventProperties = {},\n  iconClassName = 'icon-common-play'\n}: TPlayButtonProps): JSX.Element => {\n  const [showVerification, setShowVerification] = useState<boolean | undefined>(undefined);\n  const postOptUserInToVoiceChat = async () => {\n    const response = await playButtonService.postOptUserInToVoiceChat(true);\n    return response;\n  };\n\n  useEffect(() => {\n    const fetchShowIdentityVerificationFlow = async () => {\n      try {\n        const showIdentityVerificationFlow = await getShowIdentityVerificationFlow(universeId);\n        setShowVerification(showIdentityVerificationFlow);\n      } catch (e) {\n        console.error(e);\n        setShowVerification(false);\n      }\n    };\n\n    // eslint-disable-next-line no-void\n    void fetchShowIdentityVerificationFlow();\n  }, []);\n\n  if (showVerification === undefined) {\n    return <Loading />;\n  }\n\n  return (\n    <React.Fragment>\n      <Button\n        data-testid='play-button'\n        className='btn-full-width btn-common-play-game-lg'\n        onClick={async e => {\n          e.preventDefault();\n          e.stopPropagation();\n\n          if (status === PlayabilityStatus.Playable) {\n            // If successfully verified age, opt user in to voice chat\n            if (showVerification) {\n              const [_, didVerifyAge] = await IdentityVerificationService.startVerificationFlow();\n              if (didVerifyAge) {\n                setShowVerification(false);\n                // eslint-disable-next-line no-void\n                void postOptUserInToVoiceChat();\n              }\n            }\n            launchGame(placeId, eventProperties);\n          } else if (status === PlayabilityStatus.GuestProhibited) {\n            launchLogin(placeId);\n          }\n        }}>\n        <span className={iconClassName} />\n      </Button>\n      <div id='id-verification-container' />\n    </React.Fragment>\n  );\n};\n\nexport type TErrorProps = {\n  playabilityStatus: Exclude<\n    TPlayabilityStatus,\n    | TPlayabilityStatuses['Playable']\n    | TPlayabilityStatuses['GuestProhibited']\n    | TPlayabilityStatuses['PurchaseRequired']\n  >;\n};\n\nexport const Error = ({\n  translate,\n  playabilityStatus\n}: TErrorProps & {\n  translate: TranslateFunction;\n}): JSX.Element => (\n  <span data-testid='play-error' className='error-message'>\n    {translate(playButtonConstants.playButtonTranslationMap[playabilityStatus])}\n  </span>\n);\n\nexport const WithTranslationError = withTranslations<TErrorProps>(\n  Error,\n  playButtonTranslationConfig\n);\n\nexport type TDefaultPlayButtonProps = {\n  placeId: string;\n  universeId: string;\n  refetchPlayabilityStatus: () => Promise<void>;\n  playabilityStatus: TPlayabilityStatus | undefined;\n  eventProperties?: Record<string, number | string | undefined>;\n};\n\nexport const DefaultPlayButton = ({\n  placeId,\n  universeId,\n  refetchPlayabilityStatus,\n  playabilityStatus,\n  eventProperties = {}\n}: TDefaultPlayButtonProps): JSX.Element => {\n  switch (playabilityStatus) {\n    case undefined:\n      return <Loading />;\n    case PlayabilityStatus.Playable:\n    case PlayabilityStatus.GuestProhibited:\n      return (\n        <PlayButton\n          universeId={universeId}\n          placeId={placeId}\n          status={playabilityStatus}\n          eventProperties={eventProperties}\n        />\n      );\n    case PlayabilityStatus.PurchaseRequired:\n      return (\n        <WithTranslationPurchaseButton\n          refetchPlayabilityStatus={refetchPlayabilityStatus}\n          universeId={universeId}\n          placeId={placeId}\n        />\n      );\n    default:\n      return <WithTranslationError playabilityStatus={playabilityStatus} />;\n  }\n};\n","var __WEBPACK_NAMESPACE_OBJECT__ = React;","var __WEBPACK_NAMESPACE_OBJECT__ = CoreRobloxUtilities;","var __WEBPACK_NAMESPACE_OBJECT__ = CoreUtilities;","import { AxiosResponse } from 'axios';\nimport { dataStores } from 'core-roblox-utilities';\nimport { EnvironmentUrls } from 'Roblox';\nimport { httpService } from 'core-utilities';\nimport {\n  TGetProductInfo,\n  TGetPlayabilityStatus,\n  TGetProductDetails,\n  TShowAgeVerificationOverlayResponse,\n  TGuacPlayButtonUIResponse,\n  TPostOptUserInToVoiceChatResponse\n} from '../types/playButtonTypes';\n\nconst { gamesDataStore } = dataStores;\n\nconst getProductDetails = async (placeId: string[]): Promise<TGetProductDetails> => {\n  const { data = [] } = (await gamesDataStore.getPlaceDetails(placeId)) as AxiosResponse<\n    TGetProductDetails[]\n  >;\n  return data[0];\n};\n\nconst getProductInfo = async (universeIds: string[]): Promise<TGetProductInfo> => {\n  const {\n    data: { data = [] }\n  } = (await gamesDataStore.getProductInfo(universeIds)) as AxiosResponse<{\n    data: TGetProductInfo[];\n  }>;\n  return data[0];\n};\n\nconst getPlayabilityStatus = async (universeIds: string[]): Promise<TGetPlayabilityStatus> => {\n  const { data = [] } = (await gamesDataStore.getPlayabilityStatus(universeIds)) as AxiosResponse<\n    TGetPlayabilityStatus[]\n  >;\n  return data[0];\n};\n\nconst getGuacPlayButtonUI = async (): Promise<TGuacPlayButtonUIResponse> => {\n  const urlConfig = {\n    withCredentials: true,\n    url: `${EnvironmentUrls.apiGatewayUrl}/universal-app-configuration/v1/behaviors/play-button-ui/content`\n  };\n  const { data } = await httpService.get(urlConfig);\n  return data as TGuacPlayButtonUIResponse;\n};\n\nconst getShowAgeVerificationOverlay = async (\n  universeId: string\n): Promise<TShowAgeVerificationOverlayResponse> => {\n  const urlConfig = {\n    withCredentials: true,\n    url: `${EnvironmentUrls.voiceApi}/v1/settings/verify/show-age-verification-overlay/${universeId}`\n  };\n  const { data } = await httpService.get(urlConfig);\n  return data as TShowAgeVerificationOverlayResponse;\n};\n\nconst postOptUserInToVoiceChat = async (\n  isUserOptIn: boolean\n): Promise<TPostOptUserInToVoiceChatResponse> => {\n  const urlConfig = {\n    withCredentials: true,\n    url: `${EnvironmentUrls.voiceApi}/v1/settings/user-opt-in`\n  };\n  const params = {\n    isUserOptIn\n  };\n  // This endpoint returns isUserOptIn which will match the input params if successful.\n  const { data } = await httpService.post(urlConfig, params);\n  return data as TPostOptUserInToVoiceChatResponse;\n};\n\nexport default {\n  getProductInfo,\n  getProductDetails,\n  getPlayabilityStatus,\n  getShowAgeVerificationOverlay,\n  getGuacPlayButtonUI,\n  postOptUserInToVoiceChat\n};\n","import { TPlayabilityStatus, TPlayabilityStatuses } from '../types/playButtonTypes';\n\nexport const PlayabilityStatus = {\n  UnplayableOtherReason: 'UnplayableOtherReason',\n  Playable: 'Playable',\n  GuestProhibited: 'GuestProhibited',\n  GameUnapproved: 'GameUnapproved',\n  IncorrectConfiguration: 'IncorrectConfiguration',\n  UniverseRootPlaceIsPrivate: 'UniverseRootPlaceIsPrivate',\n  InsufficientPermissionFriendsOnly: 'InsufficientPermissionFriendsOnly',\n  InsufficientPermissionGroupOnly: 'InsufficientPermissionGroupOnly',\n  DeviceRestricted: 'DeviceRestricted',\n  UnderReview: 'UnderReview',\n  PurchaseRequired: 'PurchaseRequired',\n  AccountRestricted: 'AccountRestricted',\n  TemporarilyUnavailable: 'TemporarilyUnavailable',\n  PlaceHasNoPublishedVersion: 'PlaceHasNoPublishedVersion'\n} as const;\n\n// NOTE: This does not override the true event name since it is set in:\n// Roblox.CoreScripts.WebApp/Roblox.CoreScripts.WebApp/js/core/services/playGames/playGameService.js\n// Roblox.GameLaunch.WebApp/Roblox.GameLaunch.WebApp/js/gamePlayEvents.js\nconst eventStreamProperties = (\n  placeId: string,\n  eventProperties: Record<string, string | number | undefined>\n): {\n  eventName: string;\n  ctx: string;\n  properties: Record<string, any> & { placeId: string };\n  gamePlayIntentEventCtx: string;\n} => ({\n  eventName: 'playGameClicked',\n  ctx: 'click',\n  properties: {\n    ...eventProperties,\n    placeId\n  },\n  gamePlayIntentEventCtx: 'PlayButton'\n});\n\nconst playButtonTranslationMap: Record<\n  Exclude<\n    TPlayabilityStatus,\n    | TPlayabilityStatuses['Playable']\n    | TPlayabilityStatuses['GuestProhibited']\n    | TPlayabilityStatuses['PurchaseRequired']\n  >,\n  string\n> = {\n  [PlayabilityStatus.UnplayableOtherReason]: 'Response.GameTemporarilyUnavailable',\n  [PlayabilityStatus.TemporarilyUnavailable]: 'Response.GameTemporarilyUnavailable',\n  [PlayabilityStatus.GameUnapproved]: 'Label.GameUnavailablePlaceUnderReview',\n  [PlayabilityStatus.IncorrectConfiguration]: 'Response.GameTemporarilyUnavailable',\n  [PlayabilityStatus.UniverseRootPlaceIsPrivate]: 'Label.GameUnavailableCurrentlyIsPrivateVisitor',\n  [PlayabilityStatus.InsufficientPermissionFriendsOnly]: 'Label.GameUnavailablePermissionLevels',\n  [PlayabilityStatus.InsufficientPermissionGroupOnly]: 'Label.GameUnavailablePermissionLevels',\n  [PlayabilityStatus.DeviceRestricted]: 'Response.GameTemporarilyUnavailable',\n  [PlayabilityStatus.UnderReview]: 'Label.GameUnavailablePlaceUnderReview',\n  [PlayabilityStatus.AccountRestricted]: 'Label.GameUnavailableAccountResrictions',\n  [PlayabilityStatus.PlaceHasNoPublishedVersion]: 'Label.GameUnavailableRootPlaceIsUnpublished'\n};\n\nexport default {\n  playButtonTranslationMap,\n  eventStreamProperties,\n  PlayabilityStatus\n};\n","import { useEffect, useState } from 'react';\nimport playButtonService from '../services/playButtonService';\nimport { PlayabilityStatus } from '../constants/playButtonConstants';\nimport { TPlayabilityStatus } from '../types/playButtonTypes';\n\nexport const usePlayabilityStatus = (\n  universeId: string\n): [TPlayabilityStatus | undefined, () => Promise<void>] => {\n  const [playabilityStatus, setPlayabilityStatus] = useState<TPlayabilityStatus | undefined>(\n    undefined\n  );\n\n  const fetchPlayabilityStatus = async () => {\n    setPlayabilityStatus(undefined);\n    try {\n      const response = await playButtonService.getPlayabilityStatus([universeId]);\n      setPlayabilityStatus(response.playabilityStatus);\n    } catch (e) {\n      setPlayabilityStatus(PlayabilityStatus.TemporarilyUnavailable);\n    }\n  };\n\n  useEffect(() => {\n    // eslint-disable-next-line no-void\n    void fetchPlayabilityStatus();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return [playabilityStatus, fetchPlayabilityStatus];\n};\n\nexport default usePlayabilityStatus;\n","var __WEBPACK_NAMESPACE_OBJECT__ = HeaderScripts;","var __WEBPACK_NAMESPACE_OBJECT__ = ReactStyleGuide;","var __WEBPACK_NAMESPACE_OBJECT__ = RobloxItemPurchase;","var __WEBPACK_NAMESPACE_OBJECT__ = ReactUtilities;","var __WEBPACK_NAMESPACE_OBJECT__ = RobloxThumbnails;","type TConfig = {\n  common: string[];\n  feature: string;\n};\n\nexport const playButtonTranslationConfig: TConfig = {\n  common: ['Common.VisitGame'],\n  feature: ''\n};\n\nexport default playButtonTranslationConfig;\n","import { usePlayabilityStatus } from './hooks/usePlayabilityStatus';\nimport { PlayabilityStatus } from './constants/playButtonConstants';\nimport { launchGame, launchLogin } from './utils/playButtonUtils';\nimport {\n  PlayButton,\n  WithTranslationError,\n  WithTranslationPurchaseButton,\n  DefaultPlayButton\n} from './components/PlayButton';\n\nexport default {\n  usePlayabilityStatus,\n  PlayabilityStatuses: PlayabilityStatus,\n  launchGame,\n  launchLogin,\n  DefaultPlayButton,\n  PlayButton,\n  PurchaseButton: WithTranslationPurchaseButton,\n  Error: WithTranslationError\n};\n","import $ from 'jquery';\nimport { DeviceMeta } from 'Roblox';\nimport AppHybridClientInterface from './win10/appHybridClientInterface';\nimport AuthenticationChecker from './authenticationChecker';\nimport GameLauncher from './gameLauncher';\nimport GameLaunchLogger from './gameLaunchLogger';\nimport GamePlayEvents from './gamePlayEvents';\nimport GamePlayEventsHandlers from './gamePlayEventsHandlers';\nimport PrerollPlayer from './prerollPlayer';\nimport VideoPreRollDFP from './videoPreRollDFP';\nimport ProtocolHandlerClientInterface from './protocolHandlerClientInterface';\nimport PlayButton from '../ts/react/playButton/playButtonEntry';\n\n// shim all the things that are available globally for backwards compatibility;\nif (!window.Roblox) {\n  window.Roblox = {};\n}\n\nObject.assign(window.Roblox, {\n  AuthenticationChecker,\n  GameLauncher,\n  GameLaunchLogger,\n  GamePlayEvents,\n  PrerollPlayer,\n  ProtocolHandlerClientInterface,\n  VideoPreRollDFP,\n  PlayButton\n});\n\n$(document).ready(() => {\n  GamePlayEventsHandlers();\n  const device = DeviceMeta();\n  if (device.isUWPApp || device.isUniversalApp) {\n    window.Roblox.AppHybridClientInterface = AppHybridClientInterface;\n    GameLauncher.setGameLaunchInterface(AppHybridClientInterface);\n  }\n  GameLauncher.setGameLaunchLogger(GameLaunchLogger);\n});\n"],"sourceRoot":""}